/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/js/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./js/guest.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../../../deps/phoenix/priv/static/phoenix.js":
/*!******************************************************************************************!*\
  !*** /Users/alanwilder/Codes/elixir/tribe1_umbrella/deps/phoenix/priv/static/phoenix.js ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("!function (e, t) {\n   true ? module.exports = t() : undefined;\n}(this, function () {\n  return function (e) {\n    var t = {};\n\n    function n(i) {\n      if (t[i]) return t[i].exports;\n      var o = t[i] = {\n        i: i,\n        l: !1,\n        exports: {}\n      };\n      return e[i].call(o.exports, o, o.exports, n), o.l = !0, o.exports;\n    }\n\n    return n.m = e, n.c = t, n.d = function (e, t, i) {\n      n.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: i\n      });\n    }, n.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, n.t = function (e, t) {\n      if (1 & t && (e = n(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var i = Object.create(null);\n      if (n.r(i), Object.defineProperty(i, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var o in e) n.d(i, o, function (t) {\n        return e[t];\n      }.bind(null, o));\n      return i;\n    }, n.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return n.d(t, \"a\", t), t;\n    }, n.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, n.p = \"\", n(n.s = 0);\n  }([function (e, t, n) {\n    (function (t) {\n      e.exports = t.Phoenix = n(2);\n    }).call(this, n(1));\n  }, function (e, t) {\n    var n;\n\n    n = function () {\n      return this;\n    }();\n\n    try {\n      n = n || new Function(\"return this\")();\n    } catch (e) {\n      \"object\" == typeof window && (n = window);\n    }\n\n    e.exports = n;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    function i(e) {\n      return function (e) {\n        if (Array.isArray(e)) return a(e);\n      }(e) || function (e) {\n        if (\"undefined\" != typeof Symbol && Symbol.iterator in Object(e)) return Array.from(e);\n      }(e) || s(e) || function () {\n        throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n      }();\n    }\n\n    function o(e) {\n      return (o = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (e) {\n        return typeof e;\n      } : function (e) {\n        return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n      })(e);\n    }\n\n    function r(e, t) {\n      return function (e) {\n        if (Array.isArray(e)) return e;\n      }(e) || function (e, t) {\n        if (\"undefined\" == typeof Symbol || !(Symbol.iterator in Object(e))) return;\n        var n = [],\n            i = !0,\n            o = !1,\n            r = void 0;\n\n        try {\n          for (var s, a = e[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !t || n.length !== t); i = !0);\n        } catch (e) {\n          o = !0, r = e;\n        } finally {\n          try {\n            i || null == a.return || a.return();\n          } finally {\n            if (o) throw r;\n          }\n        }\n\n        return n;\n      }(e, t) || s(e, t) || function () {\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n      }();\n    }\n\n    function s(e, t) {\n      if (e) {\n        if (\"string\" == typeof e) return a(e, t);\n        var n = Object.prototype.toString.call(e).slice(8, -1);\n        return \"Object\" === n && e.constructor && (n = e.constructor.name), \"Map\" === n || \"Set\" === n ? Array.from(n) : \"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? a(e, t) : void 0;\n      }\n    }\n\n    function a(e, t) {\n      (null == t || t > e.length) && (t = e.length);\n\n      for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];\n\n      return i;\n    }\n\n    function c(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    function u(e, t) {\n      for (var n = 0; n < t.length; n++) {\n        var i = t[n];\n        i.enumerable = i.enumerable || !1, i.configurable = !0, \"value\" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);\n      }\n    }\n\n    function h(e, t, n) {\n      return t && u(e.prototype, t), n && u(e, n), e;\n    }\n\n    n.r(t), n.d(t, \"Channel\", function () {\n      return _;\n    }), n.d(t, \"Serializer\", function () {\n      return H;\n    }), n.d(t, \"Socket\", function () {\n      return U;\n    }), n.d(t, \"LongPoll\", function () {\n      return D;\n    }), n.d(t, \"Ajax\", function () {\n      return M;\n    }), n.d(t, \"Presence\", function () {\n      return N;\n    });\n\n    var l = \"undefined\" != typeof self ? self : null,\n        f = \"undefined\" != typeof window ? window : null,\n        d = l || f || void 0,\n        p = 0,\n        v = 1,\n        y = 2,\n        m = 3,\n        g = \"closed\",\n        k = \"errored\",\n        b = \"joined\",\n        j = \"joining\",\n        C = \"leaving\",\n        E = \"phx_close\",\n        R = \"phx_error\",\n        T = \"phx_join\",\n        S = \"phx_reply\",\n        w = \"phx_leave\",\n        A = [E, R, T, S, w],\n        L = \"longpoll\",\n        x = \"websocket\",\n        O = function (e) {\n      if (\"function\" == typeof e) return e;\n      return function () {\n        return e;\n      };\n    },\n        P = function () {\n      function e(t, n, i, o) {\n        c(this, e), this.channel = t, this.event = n, this.payload = i || function () {\n          return {};\n        }, this.receivedResp = null, this.timeout = o, this.timeoutTimer = null, this.recHooks = [], this.sent = !1;\n      }\n\n      return h(e, [{\n        key: \"resend\",\n        value: function (e) {\n          this.timeout = e, this.reset(), this.send();\n        }\n      }, {\n        key: \"send\",\n        value: function () {\n          this.hasReceived(\"timeout\") || (this.startTimeout(), this.sent = !0, this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload(),\n            ref: this.ref,\n            join_ref: this.channel.joinRef()\n          }));\n        }\n      }, {\n        key: \"receive\",\n        value: function (e, t) {\n          return this.hasReceived(e) && t(this.receivedResp.response), this.recHooks.push({\n            status: e,\n            callback: t\n          }), this;\n        }\n      }, {\n        key: \"reset\",\n        value: function () {\n          this.cancelRefEvent(), this.ref = null, this.refEvent = null, this.receivedResp = null, this.sent = !1;\n        }\n      }, {\n        key: \"matchReceive\",\n        value: function (e) {\n          var t = e.status,\n              n = e.response;\n          e.ref;\n          this.recHooks.filter(function (e) {\n            return e.status === t;\n          }).forEach(function (e) {\n            return e.callback(n);\n          });\n        }\n      }, {\n        key: \"cancelRefEvent\",\n        value: function () {\n          this.refEvent && this.channel.off(this.refEvent);\n        }\n      }, {\n        key: \"cancelTimeout\",\n        value: function () {\n          clearTimeout(this.timeoutTimer), this.timeoutTimer = null;\n        }\n      }, {\n        key: \"startTimeout\",\n        value: function () {\n          var e = this;\n          this.timeoutTimer && this.cancelTimeout(), this.ref = this.channel.socket.makeRef(), this.refEvent = this.channel.replyEventName(this.ref), this.channel.on(this.refEvent, function (t) {\n            e.cancelRefEvent(), e.cancelTimeout(), e.receivedResp = t, e.matchReceive(t);\n          }), this.timeoutTimer = setTimeout(function () {\n            e.trigger(\"timeout\", {});\n          }, this.timeout);\n        }\n      }, {\n        key: \"hasReceived\",\n        value: function (e) {\n          return this.receivedResp && this.receivedResp.status === e;\n        }\n      }, {\n        key: \"trigger\",\n        value: function (e, t) {\n          this.channel.trigger(this.refEvent, {\n            status: e,\n            response: t\n          });\n        }\n      }]), e;\n    }(),\n        _ = function () {\n      function e(t, n, i) {\n        var o = this;\n        c(this, e), this.state = g, this.topic = t, this.params = O(n || {}), this.socket = i, this.bindings = [], this.bindingRef = 0, this.timeout = this.socket.timeout, this.joinedOnce = !1, this.joinPush = new P(this, T, this.params, this.timeout), this.pushBuffer = [], this.stateChangeRefs = [], this.rejoinTimer = new J(function () {\n          o.socket.isConnected() && o.rejoin();\n        }, this.socket.rejoinAfterMs), this.stateChangeRefs.push(this.socket.onError(function () {\n          return o.rejoinTimer.reset();\n        })), this.stateChangeRefs.push(this.socket.onOpen(function () {\n          o.rejoinTimer.reset(), o.isErrored() && o.rejoin();\n        })), this.joinPush.receive(\"ok\", function () {\n          o.state = b, o.rejoinTimer.reset(), o.pushBuffer.forEach(function (e) {\n            return e.send();\n          }), o.pushBuffer = [];\n        }), this.joinPush.receive(\"error\", function () {\n          o.state = k, o.socket.isConnected() && o.rejoinTimer.scheduleTimeout();\n        }), this.onClose(function () {\n          o.rejoinTimer.reset(), o.socket.hasLogger() && o.socket.log(\"channel\", \"close \".concat(o.topic, \" \").concat(o.joinRef())), o.state = g, o.socket.remove(o);\n        }), this.onError(function (e) {\n          o.socket.hasLogger() && o.socket.log(\"channel\", \"error \".concat(o.topic), e), o.isJoining() && o.joinPush.reset(), o.state = k, o.socket.isConnected() && o.rejoinTimer.scheduleTimeout();\n        }), this.joinPush.receive(\"timeout\", function () {\n          o.socket.hasLogger() && o.socket.log(\"channel\", \"timeout \".concat(o.topic, \" (\").concat(o.joinRef(), \")\"), o.joinPush.timeout), new P(o, w, O({}), o.timeout).send(), o.state = k, o.joinPush.reset(), o.socket.isConnected() && o.rejoinTimer.scheduleTimeout();\n        }), this.on(S, function (e, t) {\n          o.trigger(o.replyEventName(t), e);\n        });\n      }\n\n      return h(e, [{\n        key: \"join\",\n        value: function () {\n          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.timeout;\n          if (this.joinedOnce) throw new Error(\"tried to join multiple times. 'join' can only be called a single time per channel instance\");\n          return this.timeout = e, this.joinedOnce = !0, this.rejoin(), this.joinPush;\n        }\n      }, {\n        key: \"onClose\",\n        value: function (e) {\n          this.on(E, e);\n        }\n      }, {\n        key: \"onError\",\n        value: function (e) {\n          return this.on(R, function (t) {\n            return e(t);\n          });\n        }\n      }, {\n        key: \"on\",\n        value: function (e, t) {\n          var n = this.bindingRef++;\n          return this.bindings.push({\n            event: e,\n            ref: n,\n            callback: t\n          }), n;\n        }\n      }, {\n        key: \"off\",\n        value: function (e, t) {\n          this.bindings = this.bindings.filter(function (n) {\n            return !(n.event === e && (void 0 === t || t === n.ref));\n          });\n        }\n      }, {\n        key: \"canPush\",\n        value: function () {\n          return this.socket.isConnected() && this.isJoined();\n        }\n      }, {\n        key: \"push\",\n        value: function (e, t) {\n          var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this.timeout;\n          if (!this.joinedOnce) throw new Error(\"tried to push '\".concat(e, \"' to '\").concat(this.topic, \"' before joining. Use channel.join() before pushing events\"));\n          var i = new P(this, e, function () {\n            return t;\n          }, n);\n          return this.canPush() ? i.send() : (i.startTimeout(), this.pushBuffer.push(i)), i;\n        }\n      }, {\n        key: \"leave\",\n        value: function () {\n          var e = this,\n              t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.timeout;\n          this.rejoinTimer.reset(), this.joinPush.cancelTimeout(), this.state = C;\n\n          var n = function () {\n            e.socket.hasLogger() && e.socket.log(\"channel\", \"leave \".concat(e.topic)), e.trigger(E, \"leave\");\n          },\n              i = new P(this, w, O({}), t);\n\n          return i.receive(\"ok\", function () {\n            return n();\n          }).receive(\"timeout\", function () {\n            return n();\n          }), i.send(), this.canPush() || i.trigger(\"ok\", {}), i;\n        }\n      }, {\n        key: \"onMessage\",\n        value: function (e, t, n) {\n          return t;\n        }\n      }, {\n        key: \"isLifecycleEvent\",\n        value: function (e) {\n          return A.indexOf(e) >= 0;\n        }\n      }, {\n        key: \"isMember\",\n        value: function (e, t, n, i) {\n          return this.topic === e && (!i || i === this.joinRef() || !this.isLifecycleEvent(t) || (this.socket.hasLogger() && this.socket.log(\"channel\", \"dropping outdated message\", {\n            topic: e,\n            event: t,\n            payload: n,\n            joinRef: i\n          }), !1));\n        }\n      }, {\n        key: \"joinRef\",\n        value: function () {\n          return this.joinPush.ref;\n        }\n      }, {\n        key: \"rejoin\",\n        value: function () {\n          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.timeout;\n          this.isLeaving() || (this.socket.leaveOpenTopic(this.topic), this.state = j, this.joinPush.resend(e));\n        }\n      }, {\n        key: \"trigger\",\n        value: function (e, t, n, i) {\n          var o = this.onMessage(e, t, n, i);\n          if (t && !o) throw new Error(\"channel onMessage callbacks must return the payload, modified or unmodified\");\n\n          for (var r = this.bindings.filter(function (t) {\n            return t.event === e;\n          }), s = 0; s < r.length; s++) {\n            r[s].callback(o, n, i || this.joinRef());\n          }\n        }\n      }, {\n        key: \"replyEventName\",\n        value: function (e) {\n          return \"chan_reply_\".concat(e);\n        }\n      }, {\n        key: \"isClosed\",\n        value: function () {\n          return this.state === g;\n        }\n      }, {\n        key: \"isErrored\",\n        value: function () {\n          return this.state === k;\n        }\n      }, {\n        key: \"isJoined\",\n        value: function () {\n          return this.state === b;\n        }\n      }, {\n        key: \"isJoining\",\n        value: function () {\n          return this.state === j;\n        }\n      }, {\n        key: \"isLeaving\",\n        value: function () {\n          return this.state === C;\n        }\n      }]), e;\n    }(),\n        H = {\n      HEADER_LENGTH: 1,\n      META_LENGTH: 4,\n      KINDS: {\n        push: 0,\n        reply: 1,\n        broadcast: 2\n      },\n      encode: function (e, t) {\n        if (e.payload.constructor === ArrayBuffer) return t(this.binaryEncode(e));\n        var n = [e.join_ref, e.ref, e.topic, e.event, e.payload];\n        return t(JSON.stringify(n));\n      },\n      decode: function (e, t) {\n        if (e.constructor === ArrayBuffer) return t(this.binaryDecode(e));\n        var n = r(JSON.parse(e), 5);\n        return t({\n          join_ref: n[0],\n          ref: n[1],\n          topic: n[2],\n          event: n[3],\n          payload: n[4]\n        });\n      },\n      binaryEncode: function (e) {\n        var t = e.join_ref,\n            n = e.ref,\n            i = e.event,\n            o = e.topic,\n            r = e.payload,\n            s = this.META_LENGTH + t.length + n.length + o.length + i.length,\n            a = new ArrayBuffer(this.HEADER_LENGTH + s),\n            c = new DataView(a),\n            u = 0;\n        c.setUint8(u++, this.KINDS.push), c.setUint8(u++, t.length), c.setUint8(u++, n.length), c.setUint8(u++, o.length), c.setUint8(u++, i.length), Array.from(t, function (e) {\n          return c.setUint8(u++, e.charCodeAt(0));\n        }), Array.from(n, function (e) {\n          return c.setUint8(u++, e.charCodeAt(0));\n        }), Array.from(o, function (e) {\n          return c.setUint8(u++, e.charCodeAt(0));\n        }), Array.from(i, function (e) {\n          return c.setUint8(u++, e.charCodeAt(0));\n        });\n        var h = new Uint8Array(a.byteLength + r.byteLength);\n        return h.set(new Uint8Array(a), 0), h.set(new Uint8Array(r), a.byteLength), h.buffer;\n      },\n      binaryDecode: function (e) {\n        var t = new DataView(e),\n            n = t.getUint8(0),\n            i = new TextDecoder();\n\n        switch (n) {\n          case this.KINDS.push:\n            return this.decodePush(e, t, i);\n\n          case this.KINDS.reply:\n            return this.decodeReply(e, t, i);\n\n          case this.KINDS.broadcast:\n            return this.decodeBroadcast(e, t, i);\n        }\n      },\n      decodePush: function (e, t, n) {\n        var i = t.getUint8(1),\n            o = t.getUint8(2),\n            r = t.getUint8(3),\n            s = this.HEADER_LENGTH + this.META_LENGTH - 1,\n            a = n.decode(e.slice(s, s + i));\n        s += i;\n        var c = n.decode(e.slice(s, s + o));\n        s += o;\n        var u = n.decode(e.slice(s, s + r));\n        return s += r, {\n          join_ref: a,\n          ref: null,\n          topic: c,\n          event: u,\n          payload: e.slice(s, e.byteLength)\n        };\n      },\n      decodeReply: function (e, t, n) {\n        var i = t.getUint8(1),\n            o = t.getUint8(2),\n            r = t.getUint8(3),\n            s = t.getUint8(4),\n            a = this.HEADER_LENGTH + this.META_LENGTH,\n            c = n.decode(e.slice(a, a + i));\n        a += i;\n        var u = n.decode(e.slice(a, a + o));\n        a += o;\n        var h = n.decode(e.slice(a, a + r));\n        a += r;\n        var l = n.decode(e.slice(a, a + s));\n        a += s;\n        var f = e.slice(a, e.byteLength);\n        return {\n          join_ref: c,\n          ref: u,\n          topic: h,\n          event: S,\n          payload: {\n            status: l,\n            response: f\n          }\n        };\n      },\n      decodeBroadcast: function (e, t, n) {\n        var i = t.getUint8(1),\n            o = t.getUint8(2),\n            r = this.HEADER_LENGTH + 2,\n            s = n.decode(e.slice(r, r + i));\n        r += i;\n        var a = n.decode(e.slice(r, r + o));\n        return r += o, {\n          join_ref: null,\n          ref: null,\n          topic: s,\n          event: a,\n          payload: e.slice(r, e.byteLength)\n        };\n      }\n    },\n        U = function () {\n      function e(t) {\n        var n = this,\n            i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n        c(this, e), this.stateChangeCallbacks = {\n          open: [],\n          close: [],\n          error: [],\n          message: []\n        }, this.channels = [], this.sendBuffer = [], this.ref = 0, this.timeout = i.timeout || 1e4, this.transport = i.transport || d.WebSocket || D, this.defaultEncoder = H.encode.bind(H), this.defaultDecoder = H.decode.bind(H), this.closeWasClean = !1, this.unloaded = !1, this.binaryType = i.binaryType || \"arraybuffer\", this.transport !== D ? (this.encode = i.encode || this.defaultEncoder, this.decode = i.decode || this.defaultDecoder) : (this.encode = this.defaultEncoder, this.decode = this.defaultDecoder), f && f.addEventListener && f.addEventListener(\"unload\", function (e) {\n          n.conn && (n.unloaded = !0, n.abnormalClose(\"unloaded\"));\n        }), this.heartbeatIntervalMs = i.heartbeatIntervalMs || 3e4, this.rejoinAfterMs = function (e) {\n          return i.rejoinAfterMs ? i.rejoinAfterMs(e) : [1e3, 2e3, 5e3][e - 1] || 1e4;\n        }, this.reconnectAfterMs = function (e) {\n          return n.unloaded ? 100 : i.reconnectAfterMs ? i.reconnectAfterMs(e) : [10, 50, 100, 150, 200, 250, 500, 1e3, 2e3][e - 1] || 5e3;\n        }, this.logger = i.logger || null, this.longpollerTimeout = i.longpollerTimeout || 2e4, this.params = O(i.params || {}), this.endPoint = \"\".concat(t, \"/\").concat(x), this.vsn = i.vsn || \"2.0.0\", this.heartbeatTimer = null, this.pendingHeartbeatRef = null, this.reconnectTimer = new J(function () {\n          n.teardown(function () {\n            return n.connect();\n          });\n        }, this.reconnectAfterMs);\n      }\n\n      return h(e, [{\n        key: \"protocol\",\n        value: function () {\n          return location.protocol.match(/^https/) ? \"wss\" : \"ws\";\n        }\n      }, {\n        key: \"endPointURL\",\n        value: function () {\n          var e = M.appendParams(M.appendParams(this.endPoint, this.params()), {\n            vsn: this.vsn\n          });\n          return \"/\" !== e.charAt(0) ? e : \"/\" === e.charAt(1) ? \"\".concat(this.protocol(), \":\").concat(e) : \"\".concat(this.protocol(), \"://\").concat(location.host).concat(e);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function (e, t, n) {\n          this.closeWasClean = !0, this.reconnectTimer.reset(), this.teardown(e, t, n);\n        }\n      }, {\n        key: \"connect\",\n        value: function (e) {\n          var t = this;\n          e && (console && console.log(\"passing params to connect is deprecated. Instead pass :params to the Socket constructor\"), this.params = O(e)), this.conn || (this.closeWasClean = !1, this.conn = new this.transport(this.endPointURL()), this.conn.binaryType = this.binaryType, this.conn.timeout = this.longpollerTimeout, this.conn.onopen = function () {\n            return t.onConnOpen();\n          }, this.conn.onerror = function (e) {\n            return t.onConnError(e);\n          }, this.conn.onmessage = function (e) {\n            return t.onConnMessage(e);\n          }, this.conn.onclose = function (e) {\n            return t.onConnClose(e);\n          });\n        }\n      }, {\n        key: \"log\",\n        value: function (e, t, n) {\n          this.logger(e, t, n);\n        }\n      }, {\n        key: \"hasLogger\",\n        value: function () {\n          return null !== this.logger;\n        }\n      }, {\n        key: \"onOpen\",\n        value: function (e) {\n          var t = this.makeRef();\n          return this.stateChangeCallbacks.open.push([t, e]), t;\n        }\n      }, {\n        key: \"onClose\",\n        value: function (e) {\n          var t = this.makeRef();\n          return this.stateChangeCallbacks.close.push([t, e]), t;\n        }\n      }, {\n        key: \"onError\",\n        value: function (e) {\n          var t = this.makeRef();\n          return this.stateChangeCallbacks.error.push([t, e]), t;\n        }\n      }, {\n        key: \"onMessage\",\n        value: function (e) {\n          var t = this.makeRef();\n          return this.stateChangeCallbacks.message.push([t, e]), t;\n        }\n      }, {\n        key: \"onConnOpen\",\n        value: function () {\n          this.hasLogger() && this.log(\"transport\", \"connected to \".concat(this.endPointURL())), this.unloaded = !1, this.closeWasClean = !1, this.flushSendBuffer(), this.reconnectTimer.reset(), this.resetHeartbeat(), this.stateChangeCallbacks.open.forEach(function (e) {\n            return (0, r(e, 2)[1])();\n          });\n        }\n      }, {\n        key: \"resetHeartbeat\",\n        value: function () {\n          var e = this;\n          this.conn && this.conn.skipHeartbeat || (this.pendingHeartbeatRef = null, clearInterval(this.heartbeatTimer), this.heartbeatTimer = setInterval(function () {\n            return e.sendHeartbeat();\n          }, this.heartbeatIntervalMs));\n        }\n      }, {\n        key: \"teardown\",\n        value: function (e, t, n) {\n          var i = this;\n          if (!this.conn) return e && e();\n          this.waitForBufferDone(function () {\n            i.conn && (t ? i.conn.close(t, n || \"\") : i.conn.close()), i.waitForSocketClosed(function () {\n              i.conn && (i.conn.onclose = function () {}, i.conn = null), e && e();\n            });\n          });\n        }\n      }, {\n        key: \"waitForBufferDone\",\n        value: function (e) {\n          var t = this,\n              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;\n          5 !== n && this.conn && this.conn.bufferedAmount ? setTimeout(function () {\n            t.waitForBufferDone(e, n + 1);\n          }, 150 * n) : e();\n        }\n      }, {\n        key: \"waitForSocketClosed\",\n        value: function (e) {\n          var t = this,\n              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;\n          5 !== n && this.conn && this.conn.readyState !== m ? setTimeout(function () {\n            t.waitForSocketClosed(e, n + 1);\n          }, 150 * n) : e();\n        }\n      }, {\n        key: \"onConnClose\",\n        value: function (e) {\n          this.hasLogger() && this.log(\"transport\", \"close\", e), this.triggerChanError(), clearInterval(this.heartbeatTimer), this.closeWasClean || this.reconnectTimer.scheduleTimeout(), this.stateChangeCallbacks.close.forEach(function (t) {\n            return (0, r(t, 2)[1])(e);\n          });\n        }\n      }, {\n        key: \"onConnError\",\n        value: function (e) {\n          this.hasLogger() && this.log(\"transport\", e), this.triggerChanError(), this.stateChangeCallbacks.error.forEach(function (t) {\n            return (0, r(t, 2)[1])(e);\n          });\n        }\n      }, {\n        key: \"triggerChanError\",\n        value: function () {\n          this.channels.forEach(function (e) {\n            e.isErrored() || e.isLeaving() || e.isClosed() || e.trigger(R);\n          });\n        }\n      }, {\n        key: \"connectionState\",\n        value: function () {\n          switch (this.conn && this.conn.readyState) {\n            case p:\n              return \"connecting\";\n\n            case v:\n              return \"open\";\n\n            case y:\n              return \"closing\";\n\n            default:\n              return \"closed\";\n          }\n        }\n      }, {\n        key: \"isConnected\",\n        value: function () {\n          return \"open\" === this.connectionState();\n        }\n      }, {\n        key: \"remove\",\n        value: function (e) {\n          this.off(e.stateChangeRefs), this.channels = this.channels.filter(function (t) {\n            return t.joinRef() !== e.joinRef();\n          });\n        }\n      }, {\n        key: \"off\",\n        value: function (e) {\n          for (var t in this.stateChangeCallbacks) this.stateChangeCallbacks[t] = this.stateChangeCallbacks[t].filter(function (t) {\n            var n = r(t, 1)[0];\n            return -1 === e.indexOf(n);\n          });\n        }\n      }, {\n        key: \"channel\",\n        value: function (e) {\n          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n              n = new _(e, t, this);\n          return this.channels.push(n), n;\n        }\n      }, {\n        key: \"push\",\n        value: function (e) {\n          var t = this;\n\n          if (this.hasLogger()) {\n            var n = e.topic,\n                i = e.event,\n                o = e.payload,\n                r = e.ref,\n                s = e.join_ref;\n            this.log(\"push\", \"\".concat(n, \" \").concat(i, \" (\").concat(s, \", \").concat(r, \")\"), o);\n          }\n\n          this.isConnected() ? this.encode(e, function (e) {\n            return t.conn.send(e);\n          }) : this.sendBuffer.push(function () {\n            return t.encode(e, function (e) {\n              return t.conn.send(e);\n            });\n          });\n        }\n      }, {\n        key: \"makeRef\",\n        value: function () {\n          var e = this.ref + 1;\n          return e === this.ref ? this.ref = 0 : this.ref = e, this.ref.toString();\n        }\n      }, {\n        key: \"sendHeartbeat\",\n        value: function () {\n          if (this.isConnected()) {\n            if (this.pendingHeartbeatRef) return this.pendingHeartbeatRef = null, this.hasLogger() && this.log(\"transport\", \"heartbeat timeout. Attempting to re-establish connection\"), void this.abnormalClose(\"heartbeat timeout\");\n            this.pendingHeartbeatRef = this.makeRef(), this.push({\n              topic: \"phoenix\",\n              event: \"heartbeat\",\n              payload: {},\n              ref: this.pendingHeartbeatRef\n            });\n          }\n        }\n      }, {\n        key: \"abnormalClose\",\n        value: function (e) {\n          this.closeWasClean = !1, this.conn.readyState === v && this.conn.close(1e3, e);\n        }\n      }, {\n        key: \"flushSendBuffer\",\n        value: function () {\n          this.isConnected() && this.sendBuffer.length > 0 && (this.sendBuffer.forEach(function (e) {\n            return e();\n          }), this.sendBuffer = []);\n        }\n      }, {\n        key: \"onConnMessage\",\n        value: function (e) {\n          var t = this;\n          this.decode(e.data, function (e) {\n            var n = e.topic,\n                i = e.event,\n                o = e.payload,\n                s = e.ref,\n                a = e.join_ref;\n            s && s === t.pendingHeartbeatRef && (t.pendingHeartbeatRef = null), t.hasLogger() && t.log(\"receive\", \"\".concat(o.status || \"\", \" \").concat(n, \" \").concat(i, \" \").concat(s && \"(\" + s + \")\" || \"\"), o);\n\n            for (var c = 0; c < t.channels.length; c++) {\n              var u = t.channels[c];\n              u.isMember(n, i, o, a) && u.trigger(i, o, s, a);\n            }\n\n            for (var h = 0; h < t.stateChangeCallbacks.message.length; h++) {\n              (0, r(t.stateChangeCallbacks.message[h], 2)[1])(e);\n            }\n          });\n        }\n      }, {\n        key: \"leaveOpenTopic\",\n        value: function (e) {\n          var t = this.channels.find(function (t) {\n            return t.topic === e && (t.isJoined() || t.isJoining());\n          });\n          t && (this.hasLogger() && this.log(\"transport\", 'leaving duplicate topic \"'.concat(e, '\"')), t.leave());\n        }\n      }]), e;\n    }(),\n        D = function () {\n      function e(t) {\n        c(this, e), this.endPoint = null, this.token = null, this.skipHeartbeat = !0, this.onopen = function () {}, this.onerror = function () {}, this.onmessage = function () {}, this.onclose = function () {}, this.pollEndpoint = this.normalizeEndpoint(t), this.readyState = p, this.poll();\n      }\n\n      return h(e, [{\n        key: \"normalizeEndpoint\",\n        value: function (e) {\n          return e.replace(\"ws://\", \"http://\").replace(\"wss://\", \"https://\").replace(new RegExp(\"(.*)/\" + x), \"$1/\" + L);\n        }\n      }, {\n        key: \"endpointURL\",\n        value: function () {\n          return M.appendParams(this.pollEndpoint, {\n            token: this.token\n          });\n        }\n      }, {\n        key: \"closeAndRetry\",\n        value: function () {\n          this.close(), this.readyState = p;\n        }\n      }, {\n        key: \"ontimeout\",\n        value: function () {\n          this.onerror(\"timeout\"), this.closeAndRetry();\n        }\n      }, {\n        key: \"poll\",\n        value: function () {\n          var e = this;\n          this.readyState !== v && this.readyState !== p || M.request(\"GET\", this.endpointURL(), \"application/json\", null, this.timeout, this.ontimeout.bind(this), function (t) {\n            if (t) {\n              var n = t.status,\n                  i = t.token,\n                  o = t.messages;\n              e.token = i;\n            } else n = 0;\n\n            switch (n) {\n              case 200:\n                o.forEach(function (t) {\n                  return e.onmessage({\n                    data: t\n                  });\n                }), e.poll();\n                break;\n\n              case 204:\n                e.poll();\n                break;\n\n              case 410:\n                e.readyState = v, e.onopen(), e.poll();\n                break;\n\n              case 403:\n                e.onerror(), e.close();\n                break;\n\n              case 0:\n              case 500:\n                e.onerror(), e.closeAndRetry();\n                break;\n\n              default:\n                throw new Error(\"unhandled poll status \".concat(n));\n            }\n          });\n        }\n      }, {\n        key: \"send\",\n        value: function (e) {\n          var t = this;\n          M.request(\"POST\", this.endpointURL(), \"application/json\", e, this.timeout, this.onerror.bind(this, \"timeout\"), function (e) {\n            e && 200 === e.status || (t.onerror(e && e.status), t.closeAndRetry());\n          });\n        }\n      }, {\n        key: \"close\",\n        value: function (e, t) {\n          this.readyState = m, this.onclose();\n        }\n      }]), e;\n    }(),\n        M = function () {\n      function e() {\n        c(this, e);\n      }\n\n      return h(e, null, [{\n        key: \"request\",\n        value: function (e, t, n, i, o, r, s) {\n          if (d.XDomainRequest) {\n            var a = new XDomainRequest();\n            this.xdomainRequest(a, e, t, i, o, r, s);\n          } else {\n            var c = new d.XMLHttpRequest();\n            this.xhrRequest(c, e, t, n, i, o, r, s);\n          }\n        }\n      }, {\n        key: \"xdomainRequest\",\n        value: function (e, t, n, i, o, r, s) {\n          var a = this;\n          e.timeout = o, e.open(t, n), e.onload = function () {\n            var t = a.parseJSON(e.responseText);\n            s && s(t);\n          }, r && (e.ontimeout = r), e.onprogress = function () {}, e.send(i);\n        }\n      }, {\n        key: \"xhrRequest\",\n        value: function (e, t, n, i, o, r, s, a) {\n          var c = this;\n          e.open(t, n, !0), e.timeout = r, e.setRequestHeader(\"Content-Type\", i), e.onerror = function () {\n            a && a(null);\n          }, e.onreadystatechange = function () {\n            if (e.readyState === c.states.complete && a) {\n              var t = c.parseJSON(e.responseText);\n              a(t);\n            }\n          }, s && (e.ontimeout = s), e.send(o);\n        }\n      }, {\n        key: \"parseJSON\",\n        value: function (e) {\n          if (!e || \"\" === e) return null;\n\n          try {\n            return JSON.parse(e);\n          } catch (t) {\n            return console && console.log(\"failed to parse JSON response\", e), null;\n          }\n        }\n      }, {\n        key: \"serialize\",\n        value: function (e, t) {\n          var n = [];\n\n          for (var i in e) if (e.hasOwnProperty(i)) {\n            var r = t ? \"\".concat(t, \"[\").concat(i, \"]\") : i,\n                s = e[i];\n            \"object\" === o(s) ? n.push(this.serialize(s, r)) : n.push(encodeURIComponent(r) + \"=\" + encodeURIComponent(s));\n          }\n\n          return n.join(\"&\");\n        }\n      }, {\n        key: \"appendParams\",\n        value: function (e, t) {\n          if (0 === Object.keys(t).length) return e;\n          var n = e.match(/\\?/) ? \"&\" : \"?\";\n          return \"\".concat(e).concat(n).concat(this.serialize(t));\n        }\n      }]), e;\n    }();\n\n    M.states = {\n      complete: 4\n    };\n\n    var N = function () {\n      function e(t) {\n        var n = this,\n            i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n        c(this, e);\n        var o = i.events || {\n          state: \"presence_state\",\n          diff: \"presence_diff\"\n        };\n        this.state = {}, this.pendingDiffs = [], this.channel = t, this.joinRef = null, this.caller = {\n          onJoin: function () {},\n          onLeave: function () {},\n          onSync: function () {}\n        }, this.channel.on(o.state, function (t) {\n          var i = n.caller,\n              o = i.onJoin,\n              r = i.onLeave,\n              s = i.onSync;\n          n.joinRef = n.channel.joinRef(), n.state = e.syncState(n.state, t, o, r), n.pendingDiffs.forEach(function (t) {\n            n.state = e.syncDiff(n.state, t, o, r);\n          }), n.pendingDiffs = [], s();\n        }), this.channel.on(o.diff, function (t) {\n          var i = n.caller,\n              o = i.onJoin,\n              r = i.onLeave,\n              s = i.onSync;\n          n.inPendingSyncState() ? n.pendingDiffs.push(t) : (n.state = e.syncDiff(n.state, t, o, r), s());\n        });\n      }\n\n      return h(e, [{\n        key: \"onJoin\",\n        value: function (e) {\n          this.caller.onJoin = e;\n        }\n      }, {\n        key: \"onLeave\",\n        value: function (e) {\n          this.caller.onLeave = e;\n        }\n      }, {\n        key: \"onSync\",\n        value: function (e) {\n          this.caller.onSync = e;\n        }\n      }, {\n        key: \"list\",\n        value: function (t) {\n          return e.list(this.state, t);\n        }\n      }, {\n        key: \"inPendingSyncState\",\n        value: function () {\n          return !this.joinRef || this.joinRef !== this.channel.joinRef();\n        }\n      }], [{\n        key: \"syncState\",\n        value: function (e, t, n, i) {\n          var o = this,\n              r = this.clone(e),\n              s = {},\n              a = {};\n          return this.map(r, function (e, n) {\n            t[e] || (a[e] = n);\n          }), this.map(t, function (e, t) {\n            var n = r[e];\n\n            if (n) {\n              var i = t.metas.map(function (e) {\n                return e.phx_ref;\n              }),\n                  c = n.metas.map(function (e) {\n                return e.phx_ref;\n              }),\n                  u = t.metas.filter(function (e) {\n                return c.indexOf(e.phx_ref) < 0;\n              }),\n                  h = n.metas.filter(function (e) {\n                return i.indexOf(e.phx_ref) < 0;\n              });\n              u.length > 0 && (s[e] = t, s[e].metas = u), h.length > 0 && (a[e] = o.clone(n), a[e].metas = h);\n            } else s[e] = t;\n          }), this.syncDiff(r, {\n            joins: s,\n            leaves: a\n          }, n, i);\n        }\n      }, {\n        key: \"syncDiff\",\n        value: function (e, t, n, o) {\n          var r = t.joins,\n              s = t.leaves,\n              a = this.clone(e);\n          return n || (n = function () {}), o || (o = function () {}), this.map(r, function (e, t) {\n            var o = a[e];\n\n            if (a[e] = t, o) {\n              var r,\n                  s = a[e].metas.map(function (e) {\n                return e.phx_ref;\n              }),\n                  c = o.metas.filter(function (e) {\n                return s.indexOf(e.phx_ref) < 0;\n              });\n              (r = a[e].metas).unshift.apply(r, i(c));\n            }\n\n            n(e, o, t);\n          }), this.map(s, function (e, t) {\n            var n = a[e];\n\n            if (n) {\n              var i = t.metas.map(function (e) {\n                return e.phx_ref;\n              });\n              n.metas = n.metas.filter(function (e) {\n                return i.indexOf(e.phx_ref) < 0;\n              }), o(e, n, t), 0 === n.metas.length && delete a[e];\n            }\n          }), a;\n        }\n      }, {\n        key: \"list\",\n        value: function (e, t) {\n          return t || (t = function (e, t) {\n            return t;\n          }), this.map(e, function (e, n) {\n            return t(e, n);\n          });\n        }\n      }, {\n        key: \"map\",\n        value: function (e, t) {\n          return Object.getOwnPropertyNames(e).map(function (n) {\n            return t(n, e[n]);\n          });\n        }\n      }, {\n        key: \"clone\",\n        value: function (e) {\n          return JSON.parse(JSON.stringify(e));\n        }\n      }]), e;\n    }(),\n        J = function () {\n      function e(t, n) {\n        c(this, e), this.callback = t, this.timerCalc = n, this.timer = null, this.tries = 0;\n      }\n\n      return h(e, [{\n        key: \"reset\",\n        value: function () {\n          this.tries = 0, clearTimeout(this.timer);\n        }\n      }, {\n        key: \"scheduleTimeout\",\n        value: function () {\n          var e = this;\n          clearTimeout(this.timer), this.timer = setTimeout(function () {\n            e.tries = e.tries + 1, e.callback();\n          }, this.timerCalc(this.tries + 1));\n        }\n      }]), e;\n    }();\n  }]);\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vZGVwcy9waG9lbml4L3ByaXYvc3RhdGljL3Bob2VuaXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2FsYW53aWxkZXIvQ29kZXMvZWxpeGlyL3RyaWJlMV91bWJyZWxsYS9kZXBzL3Bob2VuaXgvcHJpdi9zdGF0aWMvcGhvZW5peC5qcz8zNTkwIl0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuUGhvZW5peD10KCk6ZS5QaG9lbml4PXQoKX0odGhpcywoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9e307ZnVuY3Rpb24gbihpKXtpZih0W2ldKXJldHVybiB0W2ldLmV4cG9ydHM7dmFyIG89dFtpXT17aTppLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbaV0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsbiksby5sPSEwLG8uZXhwb3J0c31yZXR1cm4gbi5tPWUsbi5jPXQsbi5kPWZ1bmN0aW9uKGUsdCxpKXtuLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7ZW51bWVyYWJsZTohMCxnZXQ6aX0pfSxuLnI9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0sbi50PWZ1bmN0aW9uKGUsdCl7aWYoMSZ0JiYoZT1uKGUpKSw4JnQpcmV0dXJuIGU7aWYoNCZ0JiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYobi5yKGkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiZGVmYXVsdFwiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJlwic3RyaW5nXCIhPXR5cGVvZiBlKWZvcih2YXIgbyBpbiBlKW4uZChpLG8sZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19LmJpbmQobnVsbCxvKSk7cmV0dXJuIGl9LG4ubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gbi5kKHQsXCJhXCIsdCksdH0sbi5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxuLnA9XCJcIixuKG4ucz0wKX0oW2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24odCl7ZS5leHBvcnRzPXQuUGhvZW5peD1uKDIpfSkuY2FsbCh0aGlzLG4oMSkpfSxmdW5jdGlvbihlLHQpe3ZhciBuO249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7bj1ufHxuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpfWNhdGNoKGUpe1wib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJihuPXdpbmRvdyl9ZS5leHBvcnRzPW59LGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBhKGUpfShlKXx8ZnVuY3Rpb24oZSl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKSlyZXR1cm4gQXJyYXkuZnJvbShlKX0oZSl8fHMoZSl8fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9KCl9ZnVuY3Rpb24gbyhlKXtyZXR1cm4obz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gcihlLHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlfShlKXx8ZnVuY3Rpb24oZSx0KXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHwhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpKXJldHVybjt2YXIgbj1bXSxpPSEwLG89ITEscj12b2lkIDA7dHJ5e2Zvcih2YXIgcyxhPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEoaT0ocz1hLm5leHQoKSkuZG9uZSkmJihuLnB1c2gocy52YWx1ZSksIXR8fG4ubGVuZ3RoIT09dCk7aT0hMCk7fWNhdGNoKGUpe289ITAscj1lfWZpbmFsbHl7dHJ5e2l8fG51bGw9PWEucmV0dXJufHxhLnJldHVybigpfWZpbmFsbHl7aWYobyl0aHJvdyByfX1yZXR1cm4gbn0oZSx0KXx8cyhlLHQpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9KCl9ZnVuY3Rpb24gcyhlLHQpe2lmKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBhKGUsdCk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO3JldHVyblwiT2JqZWN0XCI9PT1uJiZlLmNvbnN0cnVjdG9yJiYobj1lLmNvbnN0cnVjdG9yLm5hbWUpLFwiTWFwXCI9PT1ufHxcIlNldFwiPT09bj9BcnJheS5mcm9tKG4pOlwiQXJndW1lbnRzXCI9PT1ufHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKT9hKGUsdCk6dm9pZCAwfX1mdW5jdGlvbiBhKGUsdCl7KG51bGw9PXR8fHQ+ZS5sZW5ndGgpJiYodD1lLmxlbmd0aCk7Zm9yKHZhciBuPTAsaT1uZXcgQXJyYXkodCk7bjx0O24rKylpW25dPWVbbl07cmV0dXJuIGl9ZnVuY3Rpb24gYyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gdShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgaT10W25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLmtleSxpKX19ZnVuY3Rpb24gaChlLHQsbil7cmV0dXJuIHQmJnUoZS5wcm90b3R5cGUsdCksbiYmdShlLG4pLGV9bi5yKHQpLG4uZCh0LFwiQ2hhbm5lbFwiLChmdW5jdGlvbigpe3JldHVybiBffSkpLG4uZCh0LFwiU2VyaWFsaXplclwiLChmdW5jdGlvbigpe3JldHVybiBIfSkpLG4uZCh0LFwiU29ja2V0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFV9KSksbi5kKHQsXCJMb25nUG9sbFwiLChmdW5jdGlvbigpe3JldHVybiBEfSkpLG4uZCh0LFwiQWpheFwiLChmdW5jdGlvbigpe3JldHVybiBNfSkpLG4uZCh0LFwiUHJlc2VuY2VcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTn0pKTt2YXIgbD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOm51bGwsZj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpudWxsLGQ9bHx8Znx8dm9pZCAwLHA9MCx2PTEseT0yLG09MyxnPVwiY2xvc2VkXCIsaz1cImVycm9yZWRcIixiPVwiam9pbmVkXCIsaj1cImpvaW5pbmdcIixDPVwibGVhdmluZ1wiLEU9XCJwaHhfY2xvc2VcIixSPVwicGh4X2Vycm9yXCIsVD1cInBoeF9qb2luXCIsUz1cInBoeF9yZXBseVwiLHc9XCJwaHhfbGVhdmVcIixBPVtFLFIsVCxTLHddLEw9XCJsb25ncG9sbFwiLHg9XCJ3ZWJzb2NrZXRcIixPPWZ1bmN0aW9uKGUpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpcmV0dXJuIGU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGV9fSxQPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4saSxvKXtjKHRoaXMsZSksdGhpcy5jaGFubmVsPXQsdGhpcy5ldmVudD1uLHRoaXMucGF5bG9hZD1pfHxmdW5jdGlvbigpe3JldHVybnt9fSx0aGlzLnJlY2VpdmVkUmVzcD1udWxsLHRoaXMudGltZW91dD1vLHRoaXMudGltZW91dFRpbWVyPW51bGwsdGhpcy5yZWNIb29rcz1bXSx0aGlzLnNlbnQ9ITF9cmV0dXJuIGgoZSxbe2tleTpcInJlc2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMudGltZW91dD1lLHRoaXMucmVzZXQoKSx0aGlzLnNlbmQoKX19LHtrZXk6XCJzZW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmhhc1JlY2VpdmVkKFwidGltZW91dFwiKXx8KHRoaXMuc3RhcnRUaW1lb3V0KCksdGhpcy5zZW50PSEwLHRoaXMuY2hhbm5lbC5zb2NrZXQucHVzaCh7dG9waWM6dGhpcy5jaGFubmVsLnRvcGljLGV2ZW50OnRoaXMuZXZlbnQscGF5bG9hZDp0aGlzLnBheWxvYWQoKSxyZWY6dGhpcy5yZWYsam9pbl9yZWY6dGhpcy5jaGFubmVsLmpvaW5SZWYoKX0pKX19LHtrZXk6XCJyZWNlaXZlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5oYXNSZWNlaXZlZChlKSYmdCh0aGlzLnJlY2VpdmVkUmVzcC5yZXNwb25zZSksdGhpcy5yZWNIb29rcy5wdXNoKHtzdGF0dXM6ZSxjYWxsYmFjazp0fSksdGhpc319LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxSZWZFdmVudCgpLHRoaXMucmVmPW51bGwsdGhpcy5yZWZFdmVudD1udWxsLHRoaXMucmVjZWl2ZWRSZXNwPW51bGwsdGhpcy5zZW50PSExfX0se2tleTpcIm1hdGNoUmVjZWl2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhdHVzLG49ZS5yZXNwb25zZTtlLnJlZjt0aGlzLnJlY0hvb2tzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdHVzPT09dH0pKS5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gZS5jYWxsYmFjayhuKX0pKX19LHtrZXk6XCJjYW5jZWxSZWZFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZWZFdmVudCYmdGhpcy5jaGFubmVsLm9mZih0aGlzLnJlZkV2ZW50KX19LHtrZXk6XCJjYW5jZWxUaW1lb3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0VGltZXIpLHRoaXMudGltZW91dFRpbWVyPW51bGx9fSx7a2V5Olwic3RhcnRUaW1lb3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMudGltZW91dFRpbWVyJiZ0aGlzLmNhbmNlbFRpbWVvdXQoKSx0aGlzLnJlZj10aGlzLmNoYW5uZWwuc29ja2V0Lm1ha2VSZWYoKSx0aGlzLnJlZkV2ZW50PXRoaXMuY2hhbm5lbC5yZXBseUV2ZW50TmFtZSh0aGlzLnJlZiksdGhpcy5jaGFubmVsLm9uKHRoaXMucmVmRXZlbnQsKGZ1bmN0aW9uKHQpe2UuY2FuY2VsUmVmRXZlbnQoKSxlLmNhbmNlbFRpbWVvdXQoKSxlLnJlY2VpdmVkUmVzcD10LGUubWF0Y2hSZWNlaXZlKHQpfSkpLHRoaXMudGltZW91dFRpbWVyPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZS50cmlnZ2VyKFwidGltZW91dFwiLHt9KX0pLHRoaXMudGltZW91dCl9fSx7a2V5OlwiaGFzUmVjZWl2ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWNlaXZlZFJlc3AmJnRoaXMucmVjZWl2ZWRSZXNwLnN0YXR1cz09PWV9fSx7a2V5OlwidHJpZ2dlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5jaGFubmVsLnRyaWdnZXIodGhpcy5yZWZFdmVudCx7c3RhdHVzOmUscmVzcG9uc2U6dH0pfX1dKSxlfSgpLF89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixpKXt2YXIgbz10aGlzO2ModGhpcyxlKSx0aGlzLnN0YXRlPWcsdGhpcy50b3BpYz10LHRoaXMucGFyYW1zPU8obnx8e30pLHRoaXMuc29ja2V0PWksdGhpcy5iaW5kaW5ncz1bXSx0aGlzLmJpbmRpbmdSZWY9MCx0aGlzLnRpbWVvdXQ9dGhpcy5zb2NrZXQudGltZW91dCx0aGlzLmpvaW5lZE9uY2U9ITEsdGhpcy5qb2luUHVzaD1uZXcgUCh0aGlzLFQsdGhpcy5wYXJhbXMsdGhpcy50aW1lb3V0KSx0aGlzLnB1c2hCdWZmZXI9W10sdGhpcy5zdGF0ZUNoYW5nZVJlZnM9W10sdGhpcy5yZWpvaW5UaW1lcj1uZXcgSigoZnVuY3Rpb24oKXtvLnNvY2tldC5pc0Nvbm5lY3RlZCgpJiZvLnJlam9pbigpfSksdGhpcy5zb2NrZXQucmVqb2luQWZ0ZXJNcyksdGhpcy5zdGF0ZUNoYW5nZVJlZnMucHVzaCh0aGlzLnNvY2tldC5vbkVycm9yKChmdW5jdGlvbigpe3JldHVybiBvLnJlam9pblRpbWVyLnJlc2V0KCl9KSkpLHRoaXMuc3RhdGVDaGFuZ2VSZWZzLnB1c2godGhpcy5zb2NrZXQub25PcGVuKChmdW5jdGlvbigpe28ucmVqb2luVGltZXIucmVzZXQoKSxvLmlzRXJyb3JlZCgpJiZvLnJlam9pbigpfSkpKSx0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJva1wiLChmdW5jdGlvbigpe28uc3RhdGU9YixvLnJlam9pblRpbWVyLnJlc2V0KCksby5wdXNoQnVmZmVyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNlbmQoKX0pKSxvLnB1c2hCdWZmZXI9W119KSksdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwiZXJyb3JcIiwoZnVuY3Rpb24oKXtvLnN0YXRlPWssby5zb2NrZXQuaXNDb25uZWN0ZWQoKSYmby5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKX0pKSx0aGlzLm9uQ2xvc2UoKGZ1bmN0aW9uKCl7by5yZWpvaW5UaW1lci5yZXNldCgpLG8uc29ja2V0Lmhhc0xvZ2dlcigpJiZvLnNvY2tldC5sb2coXCJjaGFubmVsXCIsXCJjbG9zZSBcIi5jb25jYXQoby50b3BpYyxcIiBcIikuY29uY2F0KG8uam9pblJlZigpKSksby5zdGF0ZT1nLG8uc29ja2V0LnJlbW92ZShvKX0pKSx0aGlzLm9uRXJyb3IoKGZ1bmN0aW9uKGUpe28uc29ja2V0Lmhhc0xvZ2dlcigpJiZvLnNvY2tldC5sb2coXCJjaGFubmVsXCIsXCJlcnJvciBcIi5jb25jYXQoby50b3BpYyksZSksby5pc0pvaW5pbmcoKSYmby5qb2luUHVzaC5yZXNldCgpLG8uc3RhdGU9ayxvLnNvY2tldC5pc0Nvbm5lY3RlZCgpJiZvLnJlam9pblRpbWVyLnNjaGVkdWxlVGltZW91dCgpfSkpLHRoaXMuam9pblB1c2gucmVjZWl2ZShcInRpbWVvdXRcIiwoZnVuY3Rpb24oKXtvLnNvY2tldC5oYXNMb2dnZXIoKSYmby5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLFwidGltZW91dCBcIi5jb25jYXQoby50b3BpYyxcIiAoXCIpLmNvbmNhdChvLmpvaW5SZWYoKSxcIilcIiksby5qb2luUHVzaC50aW1lb3V0KSxuZXcgUChvLHcsTyh7fSksby50aW1lb3V0KS5zZW5kKCksby5zdGF0ZT1rLG8uam9pblB1c2gucmVzZXQoKSxvLnNvY2tldC5pc0Nvbm5lY3RlZCgpJiZvLnJlam9pblRpbWVyLnNjaGVkdWxlVGltZW91dCgpfSkpLHRoaXMub24oUywoZnVuY3Rpb24oZSx0KXtvLnRyaWdnZXIoby5yZXBseUV2ZW50TmFtZSh0KSxlKX0pKX1yZXR1cm4gaChlLFt7a2V5Olwiam9pblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMudGltZW91dDtpZih0aGlzLmpvaW5lZE9uY2UpdGhyb3cgbmV3IEVycm9yKFwidHJpZWQgdG8gam9pbiBtdWx0aXBsZSB0aW1lcy4gJ2pvaW4nIGNhbiBvbmx5IGJlIGNhbGxlZCBhIHNpbmdsZSB0aW1lIHBlciBjaGFubmVsIGluc3RhbmNlXCIpO3JldHVybiB0aGlzLnRpbWVvdXQ9ZSx0aGlzLmpvaW5lZE9uY2U9ITAsdGhpcy5yZWpvaW4oKSx0aGlzLmpvaW5QdXNofX0se2tleTpcIm9uQ2xvc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLm9uKEUsZSl9fSx7a2V5Olwib25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9uKFIsKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfSkpfX0se2tleTpcIm9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmJpbmRpbmdSZWYrKztyZXR1cm4gdGhpcy5iaW5kaW5ncy5wdXNoKHtldmVudDplLHJlZjpuLGNhbGxiYWNrOnR9KSxufX0se2tleTpcIm9mZlwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5iaW5kaW5ncz10aGlzLmJpbmRpbmdzLmZpbHRlcigoZnVuY3Rpb24obil7cmV0dXJuIShuLmV2ZW50PT09ZSYmKHZvaWQgMD09PXR8fHQ9PT1uLnJlZikpfSkpfX0se2tleTpcImNhblB1c2hcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpJiZ0aGlzLmlzSm9pbmVkKCl9fSx7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnRoaXMudGltZW91dDtpZighdGhpcy5qb2luZWRPbmNlKXRocm93IG5ldyBFcnJvcihcInRyaWVkIHRvIHB1c2ggJ1wiLmNvbmNhdChlLFwiJyB0byAnXCIpLmNvbmNhdCh0aGlzLnRvcGljLFwiJyBiZWZvcmUgam9pbmluZy4gVXNlIGNoYW5uZWwuam9pbigpIGJlZm9yZSBwdXNoaW5nIGV2ZW50c1wiKSk7dmFyIGk9bmV3IFAodGhpcyxlLChmdW5jdGlvbigpe3JldHVybiB0fSksbik7cmV0dXJuIHRoaXMuY2FuUHVzaCgpP2kuc2VuZCgpOihpLnN0YXJ0VGltZW91dCgpLHRoaXMucHVzaEJ1ZmZlci5wdXNoKGkpKSxpfX0se2tleTpcImxlYXZlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMudGltZW91dDt0aGlzLnJlam9pblRpbWVyLnJlc2V0KCksdGhpcy5qb2luUHVzaC5jYW5jZWxUaW1lb3V0KCksdGhpcy5zdGF0ZT1DO3ZhciBuPWZ1bmN0aW9uKCl7ZS5zb2NrZXQuaGFzTG9nZ2VyKCkmJmUuc29ja2V0LmxvZyhcImNoYW5uZWxcIixcImxlYXZlIFwiLmNvbmNhdChlLnRvcGljKSksZS50cmlnZ2VyKEUsXCJsZWF2ZVwiKX0saT1uZXcgUCh0aGlzLHcsTyh7fSksdCk7cmV0dXJuIGkucmVjZWl2ZShcIm9rXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4oKX0pKS5yZWNlaXZlKFwidGltZW91dFwiLChmdW5jdGlvbigpe3JldHVybiBuKCl9KSksaS5zZW5kKCksdGhpcy5jYW5QdXNoKCl8fGkudHJpZ2dlcihcIm9rXCIse30pLGl9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0fX0se2tleTpcImlzTGlmZWN5Y2xlRXZlbnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gQS5pbmRleE9mKGUpPj0wfX0se2tleTpcImlzTWVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHRoaXMudG9waWM9PT1lJiYoIWl8fGk9PT10aGlzLmpvaW5SZWYoKXx8IXRoaXMuaXNMaWZlY3ljbGVFdmVudCh0KXx8KHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpJiZ0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsXCJkcm9wcGluZyBvdXRkYXRlZCBtZXNzYWdlXCIse3RvcGljOmUsZXZlbnQ6dCxwYXlsb2FkOm4sam9pblJlZjppfSksITEpKX19LHtrZXk6XCJqb2luUmVmXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qb2luUHVzaC5yZWZ9fSx7a2V5OlwicmVqb2luXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy50aW1lb3V0O3RoaXMuaXNMZWF2aW5nKCl8fCh0aGlzLnNvY2tldC5sZWF2ZU9wZW5Ub3BpYyh0aGlzLnRvcGljKSx0aGlzLnN0YXRlPWosdGhpcy5qb2luUHVzaC5yZXNlbmQoZSkpfX0se2tleTpcInRyaWdnZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixpKXt2YXIgbz10aGlzLm9uTWVzc2FnZShlLHQsbixpKTtpZih0JiYhbyl0aHJvdyBuZXcgRXJyb3IoXCJjaGFubmVsIG9uTWVzc2FnZSBjYWxsYmFja3MgbXVzdCByZXR1cm4gdGhlIHBheWxvYWQsIG1vZGlmaWVkIG9yIHVubW9kaWZpZWRcIik7Zm9yKHZhciByPXRoaXMuYmluZGluZ3MuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5ldmVudD09PWV9KSkscz0wO3M8ci5sZW5ndGg7cysrKXtyW3NdLmNhbGxiYWNrKG8sbixpfHx0aGlzLmpvaW5SZWYoKSl9fX0se2tleTpcInJlcGx5RXZlbnROYW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuXCJjaGFuX3JlcGx5X1wiLmNvbmNhdChlKX19LHtrZXk6XCJpc0Nsb3NlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGU9PT1nfX0se2tleTpcImlzRXJyb3JlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGU9PT1rfX0se2tleTpcImlzSm9pbmVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZT09PWJ9fSx7a2V5OlwiaXNKb2luaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZT09PWp9fSx7a2V5OlwiaXNMZWF2aW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZT09PUN9fV0pLGV9KCksSD17SEVBREVSX0xFTkdUSDoxLE1FVEFfTEVOR1RIOjQsS0lORFM6e3B1c2g6MCxyZXBseToxLGJyb2FkY2FzdDoyfSxlbmNvZGU6ZnVuY3Rpb24oZSx0KXtpZihlLnBheWxvYWQuY29uc3RydWN0b3I9PT1BcnJheUJ1ZmZlcilyZXR1cm4gdCh0aGlzLmJpbmFyeUVuY29kZShlKSk7dmFyIG49W2Uuam9pbl9yZWYsZS5yZWYsZS50b3BpYyxlLmV2ZW50LGUucGF5bG9hZF07cmV0dXJuIHQoSlNPTi5zdHJpbmdpZnkobikpfSxkZWNvZGU6ZnVuY3Rpb24oZSx0KXtpZihlLmNvbnN0cnVjdG9yPT09QXJyYXlCdWZmZXIpcmV0dXJuIHQodGhpcy5iaW5hcnlEZWNvZGUoZSkpO3ZhciBuPXIoSlNPTi5wYXJzZShlKSw1KTtyZXR1cm4gdCh7am9pbl9yZWY6blswXSxyZWY6blsxXSx0b3BpYzpuWzJdLGV2ZW50Om5bM10scGF5bG9hZDpuWzRdfSl9LGJpbmFyeUVuY29kZTpmdW5jdGlvbihlKXt2YXIgdD1lLmpvaW5fcmVmLG49ZS5yZWYsaT1lLmV2ZW50LG89ZS50b3BpYyxyPWUucGF5bG9hZCxzPXRoaXMuTUVUQV9MRU5HVEgrdC5sZW5ndGgrbi5sZW5ndGgrby5sZW5ndGgraS5sZW5ndGgsYT1uZXcgQXJyYXlCdWZmZXIodGhpcy5IRUFERVJfTEVOR1RIK3MpLGM9bmV3IERhdGFWaWV3KGEpLHU9MDtjLnNldFVpbnQ4KHUrKyx0aGlzLktJTkRTLnB1c2gpLGMuc2V0VWludDgodSsrLHQubGVuZ3RoKSxjLnNldFVpbnQ4KHUrKyxuLmxlbmd0aCksYy5zZXRVaW50OCh1Kyssby5sZW5ndGgpLGMuc2V0VWludDgodSsrLGkubGVuZ3RoKSxBcnJheS5mcm9tKHQsKGZ1bmN0aW9uKGUpe3JldHVybiBjLnNldFVpbnQ4KHUrKyxlLmNoYXJDb2RlQXQoMCkpfSkpLEFycmF5LmZyb20obiwoZnVuY3Rpb24oZSl7cmV0dXJuIGMuc2V0VWludDgodSsrLGUuY2hhckNvZGVBdCgwKSl9KSksQXJyYXkuZnJvbShvLChmdW5jdGlvbihlKXtyZXR1cm4gYy5zZXRVaW50OCh1KyssZS5jaGFyQ29kZUF0KDApKX0pKSxBcnJheS5mcm9tKGksKGZ1bmN0aW9uKGUpe3JldHVybiBjLnNldFVpbnQ4KHUrKyxlLmNoYXJDb2RlQXQoMCkpfSkpO3ZhciBoPW5ldyBVaW50OEFycmF5KGEuYnl0ZUxlbmd0aCtyLmJ5dGVMZW5ndGgpO3JldHVybiBoLnNldChuZXcgVWludDhBcnJheShhKSwwKSxoLnNldChuZXcgVWludDhBcnJheShyKSxhLmJ5dGVMZW5ndGgpLGguYnVmZmVyfSxiaW5hcnlEZWNvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IERhdGFWaWV3KGUpLG49dC5nZXRVaW50OCgwKSxpPW5ldyBUZXh0RGVjb2Rlcjtzd2l0Y2gobil7Y2FzZSB0aGlzLktJTkRTLnB1c2g6cmV0dXJuIHRoaXMuZGVjb2RlUHVzaChlLHQsaSk7Y2FzZSB0aGlzLktJTkRTLnJlcGx5OnJldHVybiB0aGlzLmRlY29kZVJlcGx5KGUsdCxpKTtjYXNlIHRoaXMuS0lORFMuYnJvYWRjYXN0OnJldHVybiB0aGlzLmRlY29kZUJyb2FkY2FzdChlLHQsaSl9fSxkZWNvZGVQdXNoOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10LmdldFVpbnQ4KDEpLG89dC5nZXRVaW50OCgyKSxyPXQuZ2V0VWludDgoMykscz10aGlzLkhFQURFUl9MRU5HVEgrdGhpcy5NRVRBX0xFTkdUSC0xLGE9bi5kZWNvZGUoZS5zbGljZShzLHMraSkpO3MrPWk7dmFyIGM9bi5kZWNvZGUoZS5zbGljZShzLHMrbykpO3MrPW87dmFyIHU9bi5kZWNvZGUoZS5zbGljZShzLHMrcikpO3JldHVybiBzKz1yLHtqb2luX3JlZjphLHJlZjpudWxsLHRvcGljOmMsZXZlbnQ6dSxwYXlsb2FkOmUuc2xpY2UocyxlLmJ5dGVMZW5ndGgpfX0sZGVjb2RlUmVwbHk6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXQuZ2V0VWludDgoMSksbz10LmdldFVpbnQ4KDIpLHI9dC5nZXRVaW50OCgzKSxzPXQuZ2V0VWludDgoNCksYT10aGlzLkhFQURFUl9MRU5HVEgrdGhpcy5NRVRBX0xFTkdUSCxjPW4uZGVjb2RlKGUuc2xpY2UoYSxhK2kpKTthKz1pO3ZhciB1PW4uZGVjb2RlKGUuc2xpY2UoYSxhK28pKTthKz1vO3ZhciBoPW4uZGVjb2RlKGUuc2xpY2UoYSxhK3IpKTthKz1yO3ZhciBsPW4uZGVjb2RlKGUuc2xpY2UoYSxhK3MpKTthKz1zO3ZhciBmPWUuc2xpY2UoYSxlLmJ5dGVMZW5ndGgpO3JldHVybntqb2luX3JlZjpjLHJlZjp1LHRvcGljOmgsZXZlbnQ6UyxwYXlsb2FkOntzdGF0dXM6bCxyZXNwb25zZTpmfX19LGRlY29kZUJyb2FkY2FzdDpmdW5jdGlvbihlLHQsbil7dmFyIGk9dC5nZXRVaW50OCgxKSxvPXQuZ2V0VWludDgoMikscj10aGlzLkhFQURFUl9MRU5HVEgrMixzPW4uZGVjb2RlKGUuc2xpY2UocixyK2kpKTtyKz1pO3ZhciBhPW4uZGVjb2RlKGUuc2xpY2UocixyK28pKTtyZXR1cm4gcis9byx7am9pbl9yZWY6bnVsbCxyZWY6bnVsbCx0b3BpYzpzLGV2ZW50OmEscGF5bG9hZDplLnNsaWNlKHIsZS5ieXRlTGVuZ3RoKX19fSxVPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt2YXIgbj10aGlzLGk9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2ModGhpcyxlKSx0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzPXtvcGVuOltdLGNsb3NlOltdLGVycm9yOltdLG1lc3NhZ2U6W119LHRoaXMuY2hhbm5lbHM9W10sdGhpcy5zZW5kQnVmZmVyPVtdLHRoaXMucmVmPTAsdGhpcy50aW1lb3V0PWkudGltZW91dHx8MWU0LHRoaXMudHJhbnNwb3J0PWkudHJhbnNwb3J0fHxkLldlYlNvY2tldHx8RCx0aGlzLmRlZmF1bHRFbmNvZGVyPUguZW5jb2RlLmJpbmQoSCksdGhpcy5kZWZhdWx0RGVjb2Rlcj1ILmRlY29kZS5iaW5kKEgpLHRoaXMuY2xvc2VXYXNDbGVhbj0hMSx0aGlzLnVubG9hZGVkPSExLHRoaXMuYmluYXJ5VHlwZT1pLmJpbmFyeVR5cGV8fFwiYXJyYXlidWZmZXJcIix0aGlzLnRyYW5zcG9ydCE9PUQ/KHRoaXMuZW5jb2RlPWkuZW5jb2RlfHx0aGlzLmRlZmF1bHRFbmNvZGVyLHRoaXMuZGVjb2RlPWkuZGVjb2RlfHx0aGlzLmRlZmF1bHREZWNvZGVyKToodGhpcy5lbmNvZGU9dGhpcy5kZWZhdWx0RW5jb2Rlcix0aGlzLmRlY29kZT10aGlzLmRlZmF1bHREZWNvZGVyKSxmJiZmLmFkZEV2ZW50TGlzdGVuZXImJmYuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLChmdW5jdGlvbihlKXtuLmNvbm4mJihuLnVubG9hZGVkPSEwLG4uYWJub3JtYWxDbG9zZShcInVubG9hZGVkXCIpKX0pKSx0aGlzLmhlYXJ0YmVhdEludGVydmFsTXM9aS5oZWFydGJlYXRJbnRlcnZhbE1zfHwzZTQsdGhpcy5yZWpvaW5BZnRlck1zPWZ1bmN0aW9uKGUpe3JldHVybiBpLnJlam9pbkFmdGVyTXM/aS5yZWpvaW5BZnRlck1zKGUpOlsxZTMsMmUzLDVlM11bZS0xXXx8MWU0fSx0aGlzLnJlY29ubmVjdEFmdGVyTXM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4udW5sb2FkZWQ/MTAwOmkucmVjb25uZWN0QWZ0ZXJNcz9pLnJlY29ubmVjdEFmdGVyTXMoZSk6WzEwLDUwLDEwMCwxNTAsMjAwLDI1MCw1MDAsMWUzLDJlM11bZS0xXXx8NWUzfSx0aGlzLmxvZ2dlcj1pLmxvZ2dlcnx8bnVsbCx0aGlzLmxvbmdwb2xsZXJUaW1lb3V0PWkubG9uZ3BvbGxlclRpbWVvdXR8fDJlNCx0aGlzLnBhcmFtcz1PKGkucGFyYW1zfHx7fSksdGhpcy5lbmRQb2ludD1cIlwiLmNvbmNhdCh0LFwiL1wiKS5jb25jYXQoeCksdGhpcy52c249aS52c258fFwiMi4wLjBcIix0aGlzLmhlYXJ0YmVhdFRpbWVyPW51bGwsdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmPW51bGwsdGhpcy5yZWNvbm5lY3RUaW1lcj1uZXcgSigoZnVuY3Rpb24oKXtuLnRlYXJkb3duKChmdW5jdGlvbigpe3JldHVybiBuLmNvbm5lY3QoKX0pKX0pLHRoaXMucmVjb25uZWN0QWZ0ZXJNcyl9cmV0dXJuIGgoZSxbe2tleTpcInByb3RvY29sXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wubWF0Y2goL15odHRwcy8pP1wid3NzXCI6XCJ3c1wifX0se2tleTpcImVuZFBvaW50VVJMXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1NLmFwcGVuZFBhcmFtcyhNLmFwcGVuZFBhcmFtcyh0aGlzLmVuZFBvaW50LHRoaXMucGFyYW1zKCkpLHt2c246dGhpcy52c259KTtyZXR1cm5cIi9cIiE9PWUuY2hhckF0KDApP2U6XCIvXCI9PT1lLmNoYXJBdCgxKT9cIlwiLmNvbmNhdCh0aGlzLnByb3RvY29sKCksXCI6XCIpLmNvbmNhdChlKTpcIlwiLmNvbmNhdCh0aGlzLnByb3RvY29sKCksXCI6Ly9cIikuY29uY2F0KGxvY2F0aW9uLmhvc3QpLmNvbmNhdChlKX19LHtrZXk6XCJkaXNjb25uZWN0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuY2xvc2VXYXNDbGVhbj0hMCx0aGlzLnJlY29ubmVjdFRpbWVyLnJlc2V0KCksdGhpcy50ZWFyZG93bihlLHQsbil9fSx7a2V5OlwiY29ubmVjdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZSYmKGNvbnNvbGUmJmNvbnNvbGUubG9nKFwicGFzc2luZyBwYXJhbXMgdG8gY29ubmVjdCBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkIHBhc3MgOnBhcmFtcyB0byB0aGUgU29ja2V0IGNvbnN0cnVjdG9yXCIpLHRoaXMucGFyYW1zPU8oZSkpLHRoaXMuY29ubnx8KHRoaXMuY2xvc2VXYXNDbGVhbj0hMSx0aGlzLmNvbm49bmV3IHRoaXMudHJhbnNwb3J0KHRoaXMuZW5kUG9pbnRVUkwoKSksdGhpcy5jb25uLmJpbmFyeVR5cGU9dGhpcy5iaW5hcnlUeXBlLHRoaXMuY29ubi50aW1lb3V0PXRoaXMubG9uZ3BvbGxlclRpbWVvdXQsdGhpcy5jb25uLm9ub3Blbj1mdW5jdGlvbigpe3JldHVybiB0Lm9uQ29ubk9wZW4oKX0sdGhpcy5jb25uLm9uZXJyb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHQub25Db25uRXJyb3IoZSl9LHRoaXMuY29ubi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHQub25Db25uTWVzc2FnZShlKX0sdGhpcy5jb25uLm9uY2xvc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHQub25Db25uQ2xvc2UoZSl9KX19LHtrZXk6XCJsb2dcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dGhpcy5sb2dnZXIoZSx0LG4pfX0se2tleTpcImhhc0xvZ2dlclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmxvZ2dlcn19LHtrZXk6XCJvbk9wZW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm1ha2VSZWYoKTtyZXR1cm4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLnB1c2goW3QsZV0pLHR9fSx7a2V5Olwib25DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubWFrZVJlZigpO3JldHVybiB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmNsb3NlLnB1c2goW3QsZV0pLHR9fSx7a2V5Olwib25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubWFrZVJlZigpO3JldHVybiB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmVycm9yLnB1c2goW3QsZV0pLHR9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5tYWtlUmVmKCk7cmV0dXJuIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZS5wdXNoKFt0LGVdKSx0fX0se2tleTpcIm9uQ29ubk9wZW5cIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaGFzTG9nZ2VyKCkmJnRoaXMubG9nKFwidHJhbnNwb3J0XCIsXCJjb25uZWN0ZWQgdG8gXCIuY29uY2F0KHRoaXMuZW5kUG9pbnRVUkwoKSkpLHRoaXMudW5sb2FkZWQ9ITEsdGhpcy5jbG9zZVdhc0NsZWFuPSExLHRoaXMuZmx1c2hTZW5kQnVmZmVyKCksdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpLHRoaXMucmVzZXRIZWFydGJlYXQoKSx0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm9wZW4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7cmV0dXJuKDAscihlLDIpWzFdKSgpfSkpfX0se2tleTpcInJlc2V0SGVhcnRiZWF0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuY29ubiYmdGhpcy5jb25uLnNraXBIZWFydGJlYXR8fCh0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWY9bnVsbCxjbGVhckludGVydmFsKHRoaXMuaGVhcnRiZWF0VGltZXIpLHRoaXMuaGVhcnRiZWF0VGltZXI9c2V0SW50ZXJ2YWwoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuc2VuZEhlYXJ0YmVhdCgpfSksdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKSl9fSx7a2V5OlwidGVhcmRvd25cIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcztpZighdGhpcy5jb25uKXJldHVybiBlJiZlKCk7dGhpcy53YWl0Rm9yQnVmZmVyRG9uZSgoZnVuY3Rpb24oKXtpLmNvbm4mJih0P2kuY29ubi5jbG9zZSh0LG58fFwiXCIpOmkuY29ubi5jbG9zZSgpKSxpLndhaXRGb3JTb2NrZXRDbG9zZWQoKGZ1bmN0aW9uKCl7aS5jb25uJiYoaS5jb25uLm9uY2xvc2U9ZnVuY3Rpb24oKXt9LGkuY29ubj1udWxsKSxlJiZlKCl9KSl9KSl9fSx7a2V5Olwid2FpdEZvckJ1ZmZlckRvbmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjE7NSE9PW4mJnRoaXMuY29ubiYmdGhpcy5jb25uLmJ1ZmZlcmVkQW1vdW50P3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC53YWl0Rm9yQnVmZmVyRG9uZShlLG4rMSl9KSwxNTAqbik6ZSgpfX0se2tleTpcIndhaXRGb3JTb2NrZXRDbG9zZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjE7NSE9PW4mJnRoaXMuY29ubiYmdGhpcy5jb25uLnJlYWR5U3RhdGUhPT1tP3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC53YWl0Rm9yU29ja2V0Q2xvc2VkKGUsbisxKX0pLDE1MCpuKTplKCl9fSx7a2V5Olwib25Db25uQ2xvc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmhhc0xvZ2dlcigpJiZ0aGlzLmxvZyhcInRyYW5zcG9ydFwiLFwiY2xvc2VcIixlKSx0aGlzLnRyaWdnZXJDaGFuRXJyb3IoKSxjbGVhckludGVydmFsKHRoaXMuaGVhcnRiZWF0VGltZXIpLHRoaXMuY2xvc2VXYXNDbGVhbnx8dGhpcy5yZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKSx0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmNsb3NlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybigwLHIodCwyKVsxXSkoZSl9KSl9fSx7a2V5Olwib25Db25uRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmhhc0xvZ2dlcigpJiZ0aGlzLmxvZyhcInRyYW5zcG9ydFwiLGUpLHRoaXMudHJpZ2dlckNoYW5FcnJvcigpLHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZXJyb3IuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuKDAscih0LDIpWzFdKShlKX0pKX19LHtrZXk6XCJ0cmlnZ2VyQ2hhbkVycm9yXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNoYW5uZWxzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuaXNFcnJvcmVkKCl8fGUuaXNMZWF2aW5nKCl8fGUuaXNDbG9zZWQoKXx8ZS50cmlnZ2VyKFIpfSkpfX0se2tleTpcImNvbm5lY3Rpb25TdGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuY29ubiYmdGhpcy5jb25uLnJlYWR5U3RhdGUpe2Nhc2UgcDpyZXR1cm5cImNvbm5lY3RpbmdcIjtjYXNlIHY6cmV0dXJuXCJvcGVuXCI7Y2FzZSB5OnJldHVyblwiY2xvc2luZ1wiO2RlZmF1bHQ6cmV0dXJuXCJjbG9zZWRcIn19fSx7a2V5OlwiaXNDb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwib3BlblwiPT09dGhpcy5jb25uZWN0aW9uU3RhdGUoKX19LHtrZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLm9mZihlLnN0YXRlQ2hhbmdlUmVmcyksdGhpcy5jaGFubmVscz10aGlzLmNoYW5uZWxzLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQuam9pblJlZigpIT09ZS5qb2luUmVmKCl9KSl9fSx7a2V5Olwib2ZmXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MpdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrc1t0XT10aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW3RdLmZpbHRlcigoZnVuY3Rpb24odCl7dmFyIG49cih0LDEpWzBdO3JldHVybi0xPT09ZS5pbmRleE9mKG4pfSkpfX0se2tleTpcImNoYW5uZWxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj1uZXcgXyhlLHQsdGhpcyk7cmV0dXJuIHRoaXMuY2hhbm5lbHMucHVzaChuKSxufX0se2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuaGFzTG9nZ2VyKCkpe3ZhciBuPWUudG9waWMsaT1lLmV2ZW50LG89ZS5wYXlsb2FkLHI9ZS5yZWYscz1lLmpvaW5fcmVmO3RoaXMubG9nKFwicHVzaFwiLFwiXCIuY29uY2F0KG4sXCIgXCIpLmNvbmNhdChpLFwiIChcIikuY29uY2F0KHMsXCIsIFwiKS5jb25jYXQocixcIilcIiksbyl9dGhpcy5pc0Nvbm5lY3RlZCgpP3RoaXMuZW5jb2RlKGUsKGZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbm4uc2VuZChlKX0pKTp0aGlzLnNlbmRCdWZmZXIucHVzaCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5lbmNvZGUoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuY29ubi5zZW5kKGUpfSkpfSkpfX0se2tleTpcIm1ha2VSZWZcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmVmKzE7cmV0dXJuIGU9PT10aGlzLnJlZj90aGlzLnJlZj0wOnRoaXMucmVmPWUsdGhpcy5yZWYudG9TdHJpbmcoKX19LHtrZXk6XCJzZW5kSGVhcnRiZWF0XCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLmlzQ29ubmVjdGVkKCkpe2lmKHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZilyZXR1cm4gdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmPW51bGwsdGhpcy5oYXNMb2dnZXIoKSYmdGhpcy5sb2coXCJ0cmFuc3BvcnRcIixcImhlYXJ0YmVhdCB0aW1lb3V0LiBBdHRlbXB0aW5nIHRvIHJlLWVzdGFibGlzaCBjb25uZWN0aW9uXCIpLHZvaWQgdGhpcy5hYm5vcm1hbENsb3NlKFwiaGVhcnRiZWF0IHRpbWVvdXRcIik7dGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmPXRoaXMubWFrZVJlZigpLHRoaXMucHVzaCh7dG9waWM6XCJwaG9lbml4XCIsZXZlbnQ6XCJoZWFydGJlYXRcIixwYXlsb2FkOnt9LHJlZjp0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWZ9KX19fSx7a2V5OlwiYWJub3JtYWxDbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY2xvc2VXYXNDbGVhbj0hMSx0aGlzLmNvbm4ucmVhZHlTdGF0ZT09PXYmJnRoaXMuY29ubi5jbG9zZSgxZTMsZSl9fSx7a2V5OlwiZmx1c2hTZW5kQnVmZmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlzQ29ubmVjdGVkKCkmJnRoaXMuc2VuZEJ1ZmZlci5sZW5ndGg+MCYmKHRoaXMuc2VuZEJ1ZmZlci5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gZSgpfSkpLHRoaXMuc2VuZEJ1ZmZlcj1bXSl9fSx7a2V5Olwib25Db25uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5kZWNvZGUoZS5kYXRhLChmdW5jdGlvbihlKXt2YXIgbj1lLnRvcGljLGk9ZS5ldmVudCxvPWUucGF5bG9hZCxzPWUucmVmLGE9ZS5qb2luX3JlZjtzJiZzPT09dC5wZW5kaW5nSGVhcnRiZWF0UmVmJiYodC5wZW5kaW5nSGVhcnRiZWF0UmVmPW51bGwpLHQuaGFzTG9nZ2VyKCkmJnQubG9nKFwicmVjZWl2ZVwiLFwiXCIuY29uY2F0KG8uc3RhdHVzfHxcIlwiLFwiIFwiKS5jb25jYXQobixcIiBcIikuY29uY2F0KGksXCIgXCIpLmNvbmNhdChzJiZcIihcIitzK1wiKVwifHxcIlwiKSxvKTtmb3IodmFyIGM9MDtjPHQuY2hhbm5lbHMubGVuZ3RoO2MrKyl7dmFyIHU9dC5jaGFubmVsc1tjXTt1LmlzTWVtYmVyKG4saSxvLGEpJiZ1LnRyaWdnZXIoaSxvLHMsYSl9Zm9yKHZhciBoPTA7aDx0LnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2UubGVuZ3RoO2grKyl7KDAscih0LnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2VbaF0sMilbMV0pKGUpfX0pKX19LHtrZXk6XCJsZWF2ZU9wZW5Ub3BpY1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY2hhbm5lbHMuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9waWM9PT1lJiYodC5pc0pvaW5lZCgpfHx0LmlzSm9pbmluZygpKX0pKTt0JiYodGhpcy5oYXNMb2dnZXIoKSYmdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwnbGVhdmluZyBkdXBsaWNhdGUgdG9waWMgXCInLmNvbmNhdChlLCdcIicpKSx0LmxlYXZlKCkpfX1dKSxlfSgpLEQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2ModGhpcyxlKSx0aGlzLmVuZFBvaW50PW51bGwsdGhpcy50b2tlbj1udWxsLHRoaXMuc2tpcEhlYXJ0YmVhdD0hMCx0aGlzLm9ub3Blbj1mdW5jdGlvbigpe30sdGhpcy5vbmVycm9yPWZ1bmN0aW9uKCl7fSx0aGlzLm9ubWVzc2FnZT1mdW5jdGlvbigpe30sdGhpcy5vbmNsb3NlPWZ1bmN0aW9uKCl7fSx0aGlzLnBvbGxFbmRwb2ludD10aGlzLm5vcm1hbGl6ZUVuZHBvaW50KHQpLHRoaXMucmVhZHlTdGF0ZT1wLHRoaXMucG9sbCgpfXJldHVybiBoKGUsW3trZXk6XCJub3JtYWxpemVFbmRwb2ludFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoXCJ3czovL1wiLFwiaHR0cDovL1wiKS5yZXBsYWNlKFwid3NzOi8vXCIsXCJodHRwczovL1wiKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoLiopL1wiK3gpLFwiJDEvXCIrTCl9fSx7a2V5OlwiZW5kcG9pbnRVUkxcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNLmFwcGVuZFBhcmFtcyh0aGlzLnBvbGxFbmRwb2ludCx7dG9rZW46dGhpcy50b2tlbn0pfX0se2tleTpcImNsb3NlQW5kUmV0cnlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2xvc2UoKSx0aGlzLnJlYWR5U3RhdGU9cH19LHtrZXk6XCJvbnRpbWVvdXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub25lcnJvcihcInRpbWVvdXRcIiksdGhpcy5jbG9zZUFuZFJldHJ5KCl9fSx7a2V5OlwicG9sbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJlYWR5U3RhdGUhPT12JiZ0aGlzLnJlYWR5U3RhdGUhPT1wfHxNLnJlcXVlc3QoXCJHRVRcIix0aGlzLmVuZHBvaW50VVJMKCksXCJhcHBsaWNhdGlvbi9qc29uXCIsbnVsbCx0aGlzLnRpbWVvdXQsdGhpcy5vbnRpbWVvdXQuYmluZCh0aGlzKSwoZnVuY3Rpb24odCl7aWYodCl7dmFyIG49dC5zdGF0dXMsaT10LnRva2VuLG89dC5tZXNzYWdlcztlLnRva2VuPWl9ZWxzZSBuPTA7c3dpdGNoKG4pe2Nhc2UgMjAwOm8uZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIGUub25tZXNzYWdlKHtkYXRhOnR9KX0pKSxlLnBvbGwoKTticmVhaztjYXNlIDIwNDplLnBvbGwoKTticmVhaztjYXNlIDQxMDplLnJlYWR5U3RhdGU9dixlLm9ub3BlbigpLGUucG9sbCgpO2JyZWFrO2Nhc2UgNDAzOmUub25lcnJvcigpLGUuY2xvc2UoKTticmVhaztjYXNlIDA6Y2FzZSA1MDA6ZS5vbmVycm9yKCksZS5jbG9zZUFuZFJldHJ5KCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJ1bmhhbmRsZWQgcG9sbCBzdGF0dXMgXCIuY29uY2F0KG4pKX19KSl9fSx7a2V5Olwic2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7TS5yZXF1ZXN0KFwiUE9TVFwiLHRoaXMuZW5kcG9pbnRVUkwoKSxcImFwcGxpY2F0aW9uL2pzb25cIixlLHRoaXMudGltZW91dCx0aGlzLm9uZXJyb3IuYmluZCh0aGlzLFwidGltZW91dFwiKSwoZnVuY3Rpb24oZSl7ZSYmMjAwPT09ZS5zdGF0dXN8fCh0Lm9uZXJyb3IoZSYmZS5zdGF0dXMpLHQuY2xvc2VBbmRSZXRyeSgpKX0pKX19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5yZWFkeVN0YXRlPW0sdGhpcy5vbmNsb3NlKCl9fV0pLGV9KCksTT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtjKHRoaXMsZSl9cmV0dXJuIGgoZSxudWxsLFt7a2V5OlwicmVxdWVzdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLGksbyxyLHMpe2lmKGQuWERvbWFpblJlcXVlc3Qpe3ZhciBhPW5ldyBYRG9tYWluUmVxdWVzdDt0aGlzLnhkb21haW5SZXF1ZXN0KGEsZSx0LGksbyxyLHMpfWVsc2V7dmFyIGM9bmV3IGQuWE1MSHR0cFJlcXVlc3Q7dGhpcy54aHJSZXF1ZXN0KGMsZSx0LG4saSxvLHIscyl9fX0se2tleTpcInhkb21haW5SZXF1ZXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSxvLHIscyl7dmFyIGE9dGhpcztlLnRpbWVvdXQ9byxlLm9wZW4odCxuKSxlLm9ubG9hZD1mdW5jdGlvbigpe3ZhciB0PWEucGFyc2VKU09OKGUucmVzcG9uc2VUZXh0KTtzJiZzKHQpfSxyJiYoZS5vbnRpbWVvdXQ9ciksZS5vbnByb2dyZXNzPWZ1bmN0aW9uKCl7fSxlLnNlbmQoaSl9fSx7a2V5OlwieGhyUmVxdWVzdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLGksbyxyLHMsYSl7dmFyIGM9dGhpcztlLm9wZW4odCxuLCEwKSxlLnRpbWVvdXQ9cixlLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixpKSxlLm9uZXJyb3I9ZnVuY3Rpb24oKXthJiZhKG51bGwpfSxlLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKGUucmVhZHlTdGF0ZT09PWMuc3RhdGVzLmNvbXBsZXRlJiZhKXt2YXIgdD1jLnBhcnNlSlNPTihlLnJlc3BvbnNlVGV4dCk7YSh0KX19LHMmJihlLm9udGltZW91dD1zKSxlLnNlbmQobyl9fSx7a2V5OlwicGFyc2VKU09OXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWV8fFwiXCI9PT1lKXJldHVybiBudWxsO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShlKX1jYXRjaCh0KXtyZXR1cm4gY29uc29sZSYmY29uc29sZS5sb2coXCJmYWlsZWQgdG8gcGFyc2UgSlNPTiByZXNwb25zZVwiLGUpLG51bGx9fX0se2tleTpcInNlcmlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49W107Zm9yKHZhciBpIGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eShpKSl7dmFyIHI9dD9cIlwiLmNvbmNhdCh0LFwiW1wiKS5jb25jYXQoaSxcIl1cIik6aSxzPWVbaV07XCJvYmplY3RcIj09PW8ocyk/bi5wdXNoKHRoaXMuc2VyaWFsaXplKHMscikpOm4ucHVzaChlbmNvZGVVUklDb21wb25lbnQocikrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHMpKX1yZXR1cm4gbi5qb2luKFwiJlwiKX19LHtrZXk6XCJhcHBlbmRQYXJhbXNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKDA9PT1PYmplY3Qua2V5cyh0KS5sZW5ndGgpcmV0dXJuIGU7dmFyIG49ZS5tYXRjaCgvXFw/Lyk/XCImXCI6XCI/XCI7cmV0dXJuXCJcIi5jb25jYXQoZSkuY29uY2F0KG4pLmNvbmNhdCh0aGlzLnNlcmlhbGl6ZSh0KSl9fV0pLGV9KCk7TS5zdGF0ZXM9e2NvbXBsZXRlOjR9O3ZhciBOPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt2YXIgbj10aGlzLGk9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2ModGhpcyxlKTt2YXIgbz1pLmV2ZW50c3x8e3N0YXRlOlwicHJlc2VuY2Vfc3RhdGVcIixkaWZmOlwicHJlc2VuY2VfZGlmZlwifTt0aGlzLnN0YXRlPXt9LHRoaXMucGVuZGluZ0RpZmZzPVtdLHRoaXMuY2hhbm5lbD10LHRoaXMuam9pblJlZj1udWxsLHRoaXMuY2FsbGVyPXtvbkpvaW46ZnVuY3Rpb24oKXt9LG9uTGVhdmU6ZnVuY3Rpb24oKXt9LG9uU3luYzpmdW5jdGlvbigpe319LHRoaXMuY2hhbm5lbC5vbihvLnN0YXRlLChmdW5jdGlvbih0KXt2YXIgaT1uLmNhbGxlcixvPWkub25Kb2luLHI9aS5vbkxlYXZlLHM9aS5vblN5bmM7bi5qb2luUmVmPW4uY2hhbm5lbC5qb2luUmVmKCksbi5zdGF0ZT1lLnN5bmNTdGF0ZShuLnN0YXRlLHQsbyxyKSxuLnBlbmRpbmdEaWZmcy5mb3JFYWNoKChmdW5jdGlvbih0KXtuLnN0YXRlPWUuc3luY0RpZmYobi5zdGF0ZSx0LG8scil9KSksbi5wZW5kaW5nRGlmZnM9W10scygpfSkpLHRoaXMuY2hhbm5lbC5vbihvLmRpZmYsKGZ1bmN0aW9uKHQpe3ZhciBpPW4uY2FsbGVyLG89aS5vbkpvaW4scj1pLm9uTGVhdmUscz1pLm9uU3luYztuLmluUGVuZGluZ1N5bmNTdGF0ZSgpP24ucGVuZGluZ0RpZmZzLnB1c2godCk6KG4uc3RhdGU9ZS5zeW5jRGlmZihuLnN0YXRlLHQsbyxyKSxzKCkpfSkpfXJldHVybiBoKGUsW3trZXk6XCJvbkpvaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNhbGxlci5vbkpvaW49ZX19LHtrZXk6XCJvbkxlYXZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jYWxsZXIub25MZWF2ZT1lfX0se2tleTpcIm9uU3luY1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY2FsbGVyLm9uU3luYz1lfX0se2tleTpcImxpc3RcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5saXN0KHRoaXMuc3RhdGUsdCl9fSx7a2V5OlwiaW5QZW5kaW5nU3luY1N0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5qb2luUmVmfHx0aGlzLmpvaW5SZWYhPT10aGlzLmNoYW5uZWwuam9pblJlZigpfX1dLFt7a2V5Olwic3luY1N0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIG89dGhpcyxyPXRoaXMuY2xvbmUoZSkscz17fSxhPXt9O3JldHVybiB0aGlzLm1hcChyLChmdW5jdGlvbihlLG4pe3RbZV18fChhW2VdPW4pfSkpLHRoaXMubWFwKHQsKGZ1bmN0aW9uKGUsdCl7dmFyIG49cltlXTtpZihuKXt2YXIgaT10Lm1ldGFzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucGh4X3JlZn0pKSxjPW4ubWV0YXMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5waHhfcmVmfSkpLHU9dC5tZXRhcy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBjLmluZGV4T2YoZS5waHhfcmVmKTwwfSkpLGg9bi5tZXRhcy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBpLmluZGV4T2YoZS5waHhfcmVmKTwwfSkpO3UubGVuZ3RoPjAmJihzW2VdPXQsc1tlXS5tZXRhcz11KSxoLmxlbmd0aD4wJiYoYVtlXT1vLmNsb25lKG4pLGFbZV0ubWV0YXM9aCl9ZWxzZSBzW2VdPXR9KSksdGhpcy5zeW5jRGlmZihyLHtqb2luczpzLGxlYXZlczphfSxuLGkpfX0se2tleTpcInN5bmNEaWZmXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIHI9dC5qb2lucyxzPXQubGVhdmVzLGE9dGhpcy5jbG9uZShlKTtyZXR1cm4gbnx8KG49ZnVuY3Rpb24oKXt9KSxvfHwobz1mdW5jdGlvbigpe30pLHRoaXMubWFwKHIsKGZ1bmN0aW9uKGUsdCl7dmFyIG89YVtlXTtpZihhW2VdPXQsbyl7dmFyIHIscz1hW2VdLm1ldGFzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucGh4X3JlZn0pKSxjPW8ubWV0YXMuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gcy5pbmRleE9mKGUucGh4X3JlZik8MH0pKTsocj1hW2VdLm1ldGFzKS51bnNoaWZ0LmFwcGx5KHIsaShjKSl9bihlLG8sdCl9KSksdGhpcy5tYXAocywoZnVuY3Rpb24oZSx0KXt2YXIgbj1hW2VdO2lmKG4pe3ZhciBpPXQubWV0YXMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5waHhfcmVmfSkpO24ubWV0YXM9bi5tZXRhcy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBpLmluZGV4T2YoZS5waHhfcmVmKTwwfSkpLG8oZSxuLHQpLDA9PT1uLm1ldGFzLmxlbmd0aCYmZGVsZXRlIGFbZV19fSkpLGF9fSx7a2V5OlwibGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fCh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9KSx0aGlzLm1hcChlLChmdW5jdGlvbihlLG4pe3JldHVybiB0KGUsbil9KSl9fSx7a2V5OlwibWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkubWFwKChmdW5jdGlvbihuKXtyZXR1cm4gdChuLGVbbl0pfSkpfX0se2tleTpcImNsb25lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpfX1dKSxlfSgpLEo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7Yyh0aGlzLGUpLHRoaXMuY2FsbGJhY2s9dCx0aGlzLnRpbWVyQ2FsYz1uLHRoaXMudGltZXI9bnVsbCx0aGlzLnRyaWVzPTB9cmV0dXJuIGgoZSxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRyaWVzPTAsY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpfX0se2tleTpcInNjaGVkdWxlVGltZW91dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztjbGVhclRpbWVvdXQodGhpcy50aW1lciksdGhpcy50aW1lcj1zZXRUaW1lb3V0KChmdW5jdGlvbigpe2UudHJpZXM9ZS50cmllcysxLGUuY2FsbGJhY2soKX0pLHRoaXMudGltZXJDYWxjKHRoaXMudHJpZXMrMSkpfX1dKSxlfSgpfV0pfSkpOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../../deps/phoenix/priv/static/phoenix.js\n");

/***/ }),

/***/ "./js/guest.js":
/*!*********************!*\
  !*** ./js/guest.js ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var phoenix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phoenix */ \"../../../deps/phoenix/priv/static/phoenix.js\");\n/* harmony import */ var phoenix__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phoenix__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _guest_survey__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./guest_survey */ \"./js/guest_survey.js\");\n/* harmony import */ var _guest_tribe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./guest_tribe */ \"./js/guest_tribe.js\");\n\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var guestToken = window.guestToken;\n  var guestLocation = window.guestLocation;\n\n  if (guestToken && guestLocation && guestToken != \"\") {\n    var guest_socket = new phoenix__WEBPACK_IMPORTED_MODULE_0__[\"Socket\"](\"/guest_socket\", {\n      params: {\n        token: guestToken\n      },\n      logger: function logger(kind, msg, data) {\n        console.log(\"\".concat(kind, \": \").concat(msg), data);\n      }\n    });\n    guest_socket.connect();\n\n    if (guestLocation == \"survey\") {\n      var guestSurveyChannel = guest_socket.channel(\"guest_survey_channel\");\n      guestSurveyChannel.join().receive(\"ok\", function (resp) {\n        console.log(\"joined guest survey channel\", resp);\n\n        if (!window.tribe_survey) {\n          _guest_survey__WEBPACK_IMPORTED_MODULE_1__[\"default\"].init(guestSurveyChannel);\n        }\n      }).receive(\"error\", function (reason) {\n        return console.log(\"failed to join guest survey channel\", reason);\n      });\n    } else if (guestLocation == \"tribe\") {\n      var guestExploreTribeChannel = guest_socket.channel(\"guest_tribe_channel:\".concat(window.tribeId));\n      guestExploreTribeChannel.join().receive(\"ok\", function (resp) {\n        console.log(\"joined guest tribe channel\", resp);\n        _guest_tribe__WEBPACK_IMPORTED_MODULE_2__[\"default\"].init(guestExploreTribeChannel);\n      }).receive(\"error\", function (resp) {\n        console.log(\"failed to join tribe channel\", resp);\n      });\n    }\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9ndWVzdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2d1ZXN0LmpzPzliMDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtTb2NrZXR9IGZyb20gXCJwaG9lbml4XCJcbmltcG9ydCBHdWVzdFN1cnZleSBmcm9tIFwiLi9ndWVzdF9zdXJ2ZXlcIlxuaW1wb3J0IEd1ZXN0VHJpYmUgZnJvbSBcIi4vZ3Vlc3RfdHJpYmVcIlxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBsZXQgZ3Vlc3RUb2tlbiA9IHdpbmRvdy5ndWVzdFRva2VuXG4gIGxldCBndWVzdExvY2F0aW9uID0gd2luZG93Lmd1ZXN0TG9jYXRpb25cbiAgaWYgKGd1ZXN0VG9rZW4gJiYgZ3Vlc3RMb2NhdGlvbiAmJiBndWVzdFRva2VuICE9IFwiXCIpIHtcbiAgICBsZXQgZ3Vlc3Rfc29ja2V0ID0gbmV3IFNvY2tldChcIi9ndWVzdF9zb2NrZXRcIiwge1xuICAgICAgcGFyYW1zOiB7dG9rZW46IGd1ZXN0VG9rZW59LFxuICAgICAgbG9nZ2VyOiAoa2luZCwgbXNnLCBkYXRhKSA9PiB7IGNvbnNvbGUubG9nKGAke2tpbmR9OiAke21zZ31gLCBkYXRhKX1cbiAgICB9KVxuXG4gICAgZ3Vlc3Rfc29ja2V0LmNvbm5lY3QoKVxuXG4gICAgaWYgKGd1ZXN0TG9jYXRpb24gPT0gXCJzdXJ2ZXlcIikge1xuICAgICAgbGV0IGd1ZXN0U3VydmV5Q2hhbm5lbCA9IGd1ZXN0X3NvY2tldC5jaGFubmVsKFwiZ3Vlc3Rfc3VydmV5X2NoYW5uZWxcIilcblxuICAgICAgZ3Vlc3RTdXJ2ZXlDaGFubmVsLmpvaW4oKVxuICAgICAgICAucmVjZWl2ZShcIm9rXCIsIHJlc3AgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiam9pbmVkIGd1ZXN0IHN1cnZleSBjaGFubmVsXCIsIHJlc3ApXG4gICAgICAgICAgaWYgKCF3aW5kb3cudHJpYmVfc3VydmV5KSB7XG4gICAgICAgICAgICBHdWVzdFN1cnZleS5pbml0KGd1ZXN0U3VydmV5Q2hhbm5lbClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgcmVhc29uID0+IGNvbnNvbGUubG9nKFwiZmFpbGVkIHRvIGpvaW4gZ3Vlc3Qgc3VydmV5IGNoYW5uZWxcIiwgcmVhc29uKSlcbiAgICB9IGVsc2UgaWYgKGd1ZXN0TG9jYXRpb24gPT0gXCJ0cmliZVwiKSB7XG4gICAgICBsZXQgZ3Vlc3RFeHBsb3JlVHJpYmVDaGFubmVsID0gZ3Vlc3Rfc29ja2V0LmNoYW5uZWwoYGd1ZXN0X3RyaWJlX2NoYW5uZWw6JHt3aW5kb3cudHJpYmVJZH1gKVxuICAgICAgZ3Vlc3RFeHBsb3JlVHJpYmVDaGFubmVsLmpvaW4oKVxuICAgICAgICAucmVjZWl2ZShcIm9rXCIsIHJlc3AgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiam9pbmVkIGd1ZXN0IHRyaWJlIGNoYW5uZWxcIiwgcmVzcClcbiAgICAgICAgICBHdWVzdFRyaWJlLmluaXQoZ3Vlc3RFeHBsb3JlVHJpYmVDaGFubmVsKVxuICAgICAgICB9KVxuICAgICAgICAucmVjZWl2ZShcImVycm9yXCIsIHJlc3AgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmFpbGVkIHRvIGpvaW4gdHJpYmUgY2hhbm5lbFwiLCByZXNwKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgfVxufSlcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/guest.js\n");

/***/ }),

/***/ "./js/guest_results.js":
/*!*****************************!*\
  !*** ./js/guest_results.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar GuestResults = {\n  init: function init(resp, channel) {\n    if (resp) {\n      GuestResults.addResultsToDom(resp);\n    }\n\n    GuestResults.addTribeEventListeners();\n  },\n  addResultsToDom: function addResultsToDom(resp) {\n    var titleHTML = resp[\"title_html\"];\n\n    if (titleHTML) {\n      var titleSection = document.getElementById('titleSection');\n\n      if (titleSection) {\n        var fragment = document.createRange().createContextualFragment(titleHTML);\n        titleSection.replaceWith(fragment);\n      }\n    }\n\n    var resultsHTML = resp[\"results_html\"];\n\n    if (resultsHTML) {\n      var surveySection = document.getElementById('surveySection');\n\n      if (surveySection) {\n        var _fragment = document.createRange().createContextualFragment(resultsHTML);\n\n        surveySection.replaceWith(_fragment);\n      }\n    }\n  },\n  addTribeEventListeners: function addTribeEventListeners() {\n    var tribes = document.querySelectorAll('.results-topic-count');\n\n    if (tribes) {\n      for (var i = 0; i < tribes.length; i++) {\n        var tribe = tribes[i];\n        console.log(tribe);\n        tribe.addEventListener(\"dragstart\", GuestResults.drag);\n        tribe.addEventListener(\"dragover\", GuestResults.allowDrop);\n        tribe.addEventListener(\"drop\", GuestResults.drop);\n      }\n    }\n  },\n  drag: function drag(ev) {\n    ev.dataTransfer.setData(\"dragId\", ev.target.dataset.id);\n    ev.dataTransfer.setData(\"dragRating\", ev.target.dataset.rating);\n  },\n  allowDrop: function allowDrop(ev) {\n    ev.preventDefault();\n  },\n  drop: function drop(ev) {\n    ev.preventDefault();\n    var dragID = parseInt(ev.dataTransfer.getData(\"dragId\"));\n    var dragRating = parseInt(ev.dataTransfer.getData(\"dragRating\"));\n    var targetID = parseInt(ev.target.dataset.id);\n    var targetRating = parseInt(ev.target.dataset.rating);\n    var channel = window.tribe_survey.channel;\n    var payload = [[dragID, dragRating], [targetID, targetRating]];\n    channel.push(\"combine_tribes\", payload).receive(\"ok\", function (resp) {\n      GuestResults.handleCombineTribesResponse(resp, targetID, dragID);\n    });\n  },\n  handleCombineTribesResponse: function handleCombineTribesResponse(resp, targetID, dragID) {\n    GuestResults.toggleFadeTargetAndDrag(targetID, dragID);\n    GuestResults.toggleFadeCombinationIfExists();\n    GuestResults.createOrEditAgreementText(resp); // Results.changeHeroPrompt()\n\n    setTimeout(function () {\n      GuestResults.moveCombinationIfExists();\n      GuestResults.moveTargetAndDrag(targetID, dragID);\n      GuestResults.removeAllFades();\n    }, 500);\n  },\n  toggleFadeTargetAndDrag: function toggleFadeTargetAndDrag(targetID, dragID) {\n    var drag = document.getElementById('topic' + dragID);\n    var target = document.getElementById('topic' + targetID);\n\n    if (drag.classList.contains('faded')) {\n      drag.classList.remove('faded');\n      target.classList.remove('faded');\n    } else {\n      drag.classList.add('faded');\n      target.classList.add('faded');\n    }\n  },\n  toggleFadeCombinationIfExists: function toggleFadeCombinationIfExists() {\n    var combos = document.querySelectorAll('.combined-tribes');\n\n    for (var i = 0; i < combos.length; i++) {\n      if (combos[i].classList.contains(\"faded\")) {\n        combos[i].classList.remove('faded');\n      } else {\n        combos[i].classList.add('faded');\n      }\n    }\n  },\n  removeAllFades: function removeAllFades() {\n    var tribes = document.querySelectorAll('.results-topic');\n\n    for (var i = 0; i < tribes.length; i++) {\n      tribes[i].classList.remove('faded');\n    }\n  },\n  moveTargetAndDrag: function moveTargetAndDrag(targetID, dragID) {\n    var combinedSection = document.getElementById('combinedTribes');\n    var combinedContainer = document.getElementById('combinedTribesContainer');\n    combinedContainer.classList.add('activated');\n    var drag = document.getElementById('topic' + dragID);\n    var target = document.getElementById('topic' + targetID);\n    drag.removeEventListener(\"drop\", GuestResults.drop);\n    target.removeEventListener(\"drop\", GuestResults.drop);\n    drag.classList.add(\"combined-tribes\");\n    target.classList.add(\"combined-tribes\");\n    combinedSection.appendChild(drag);\n    combinedSection.appendChild(target);\n  },\n  moveCombinationIfExists: function moveCombinationIfExists() {\n    var combos = document.querySelectorAll('.combined-tribes');\n    var individualContainer = document.getElementById('tribeResults');\n\n    for (var i = 0; i < combos.length; i++) {\n      combos[i].classList.remove('combined-tribes');\n      individualContainer.insertBefore(combos[i], individualContainer.firstChild);\n    }\n  },\n  createOrEditAgreementText: function createOrEditAgreementText(resp) {\n    var agreementCount = document.getElementById('agreementCount');\n\n    if (agreementCount) {\n      var agreement = document.getElementById('agreementText');\n      agreement.classList.add('faded');\n      setTimeout(function () {\n        agreementCount.innerHTML = GuestResults.getPeopleHtml(resp.prq.like_minded);\n        agreement.classList.remove('faded');\n      }, 500);\n    } else {\n      var combinedContainer = document.getElementById('combinedTribesContainer');\n\n      var _agreement = document.createElement('div');\n\n      var likeMinded = resp.prq.like_minded;\n\n      _agreement.classList.add('agreement');\n\n      _agreement.classList.add('faded');\n\n      _agreement.id = \"agreementText\";\n      _agreement.innerHTML = \"<span class=\\\"agreement-arrow\\\">\\u2191</span><span id=\\\"agreementCount\\\" class=\\\"agreement-count\\\">\".concat(GuestResults.getPeopleHtml(likeMinded), \" </span> \").concat(likeMinded == 1 ? \"agrees\" : \"agree\", \" with you about these\");\n      combinedContainer.appendChild(_agreement);\n      setTimeout(function () {\n        _agreement.classList.remove('faded');\n      }, 500);\n    }\n  },\n  getPeopleHtml: function getPeopleHtml(people) {\n    if (people > 1) {\n      return \"\".concat(people, \" <span class=agreement-people>people</span>\");\n    } else if (people == 1) {\n      return \"\".concat(people, \" <span class=agreement-people>person</span>\");\n    } else if (people == null || people == 0) {\n      return \"0 <span class=agreement-people>people</span>\";\n    }\n  },\n  changeHeroPrompt: function changeHeroPrompt() {\n    var heroPrompt = document.getElementById('resultsHeroPrompt');\n\n    if (heroPrompt) {\n      if (!heroPrompt.classList.contains('tribes-combined')) {\n        heroPrompt.classList.add('faded');\n        setTimeout(function () {\n          heroPrompt.classList.add('tribes-combined');\n          heroPrompt.classList.remove('faded');\n        }, 2000);\n      }\n    }\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (GuestResults);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9ndWVzdF9yZXN1bHRzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvZ3Vlc3RfcmVzdWx0cy5qcz80MDRjIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBHdWVzdFJlc3VsdHMgPSB7XG4gIGluaXQocmVzcCwgY2hhbm5lbCkge1xuICAgIGlmIChyZXNwKSB7XG4gICAgICBHdWVzdFJlc3VsdHMuYWRkUmVzdWx0c1RvRG9tKHJlc3ApXG4gICAgfVxuICAgIEd1ZXN0UmVzdWx0cy5hZGRUcmliZUV2ZW50TGlzdGVuZXJzKClcbiAgfSxcbiAgYWRkUmVzdWx0c1RvRG9tKHJlc3ApIHtcbiAgICBsZXQgdGl0bGVIVE1MID0gcmVzcFtcInRpdGxlX2h0bWxcIl1cbiAgICBpZiAodGl0bGVIVE1MKSB7XG4gICAgICBsZXQgdGl0bGVTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlU2VjdGlvbicpXG4gICAgICBpZiAodGl0bGVTZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQodGl0bGVIVE1MKVxuICAgICAgICB0aXRsZVNlY3Rpb24ucmVwbGFjZVdpdGgoZnJhZ21lbnQpXG4gICAgICB9XG4gICAgfVxuICAgIGxldCByZXN1bHRzSFRNTCA9IHJlc3BbXCJyZXN1bHRzX2h0bWxcIl1cbiAgICBpZiAocmVzdWx0c0hUTUwpIHtcbiAgICAgIGxldCBzdXJ2ZXlTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1cnZleVNlY3Rpb24nKVxuICAgICAgaWYgKHN1cnZleVNlY3Rpb24pIHtcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChyZXN1bHRzSFRNTClcbiAgICAgICAgc3VydmV5U2VjdGlvbi5yZXBsYWNlV2l0aChmcmFnbWVudClcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFkZFRyaWJlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgbGV0IHRyaWJlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXN1bHRzLXRvcGljLWNvdW50JylcbiAgICBpZiAodHJpYmVzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgdHJpYmUgPSB0cmliZXNbaV1cbiAgICAgICAgY29uc29sZS5sb2codHJpYmUpO1xuICAgICAgICB0cmliZS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIEd1ZXN0UmVzdWx0cy5kcmFnKVxuICAgICAgICB0cmliZS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgR3Vlc3RSZXN1bHRzLmFsbG93RHJvcClcbiAgICAgICAgdHJpYmUuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgR3Vlc3RSZXN1bHRzLmRyb3ApXG4gICAgICB9XG4gICAgfVxuICB9LFxuICBkcmFnKGV2KSB7XG4gICAgZXYuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJkcmFnSWRcIiwgZXYudGFyZ2V0LmRhdGFzZXQuaWQpO1xuICAgIGV2LmRhdGFUcmFuc2Zlci5zZXREYXRhKFwiZHJhZ1JhdGluZ1wiLCBldi50YXJnZXQuZGF0YXNldC5yYXRpbmcpO1xuICB9LFxuICBhbGxvd0Ryb3AoZXYpIHtcbiAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuICBkcm9wKGV2KSB7XG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgZHJhZ0lEID0gcGFyc2VJbnQoZXYuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJkcmFnSWRcIikpO1xuICAgIGxldCBkcmFnUmF0aW5nID0gcGFyc2VJbnQoZXYuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJkcmFnUmF0aW5nXCIpKTtcbiAgICBsZXQgdGFyZ2V0SUQgPSBwYXJzZUludChldi50YXJnZXQuZGF0YXNldC5pZClcbiAgICBsZXQgdGFyZ2V0UmF0aW5nID0gcGFyc2VJbnQoZXYudGFyZ2V0LmRhdGFzZXQucmF0aW5nKVxuICAgIGxldCBjaGFubmVsID0gd2luZG93LnRyaWJlX3N1cnZleS5jaGFubmVsXG4gICAgbGV0IHBheWxvYWQgPSBbW2RyYWdJRCwgZHJhZ1JhdGluZ10sIFt0YXJnZXRJRCwgdGFyZ2V0UmF0aW5nXV1cbiAgICBjaGFubmVsLnB1c2goXCJjb21iaW5lX3RyaWJlc1wiLCBwYXlsb2FkKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCAocmVzcCkgPT4ge1xuICAgICAgICBHdWVzdFJlc3VsdHMuaGFuZGxlQ29tYmluZVRyaWJlc1Jlc3BvbnNlKHJlc3AsIHRhcmdldElELCBkcmFnSUQpXG4gICAgICB9KVxuICB9LFxuICBoYW5kbGVDb21iaW5lVHJpYmVzUmVzcG9uc2UocmVzcCwgdGFyZ2V0SUQsIGRyYWdJRCkge1xuXG4gICAgR3Vlc3RSZXN1bHRzLnRvZ2dsZUZhZGVUYXJnZXRBbmREcmFnKHRhcmdldElELCBkcmFnSUQpXG4gICAgR3Vlc3RSZXN1bHRzLnRvZ2dsZUZhZGVDb21iaW5hdGlvbklmRXhpc3RzKClcbiAgICBHdWVzdFJlc3VsdHMuY3JlYXRlT3JFZGl0QWdyZWVtZW50VGV4dChyZXNwKVxuICAgIC8vIFJlc3VsdHMuY2hhbmdlSGVyb1Byb21wdCgpXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBHdWVzdFJlc3VsdHMubW92ZUNvbWJpbmF0aW9uSWZFeGlzdHMoKVxuICAgICAgR3Vlc3RSZXN1bHRzLm1vdmVUYXJnZXRBbmREcmFnKHRhcmdldElELCBkcmFnSUQpXG4gICAgICBHdWVzdFJlc3VsdHMucmVtb3ZlQWxsRmFkZXMoKVxuICAgIH0sIDUwMClcbiAgfSxcbiAgdG9nZ2xlRmFkZVRhcmdldEFuZERyYWcodGFyZ2V0SUQsIGRyYWdJRCkge1xuICAgIGxldCBkcmFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvcGljJyArIGRyYWdJRClcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvcGljJyArIHRhcmdldElEKVxuICAgIGlmIChkcmFnLmNsYXNzTGlzdC5jb250YWlucygnZmFkZWQnKSkge1xuICAgICAgZHJhZy5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlZCcpXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZmFkZWQnKVxuICAgIH0gZWxzZSB7XG4gICAgICBkcmFnLmNsYXNzTGlzdC5hZGQoJ2ZhZGVkJylcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdmYWRlZCcpXG4gICAgfVxuICB9LFxuICB0b2dnbGVGYWRlQ29tYmluYXRpb25JZkV4aXN0cygpIHtcbiAgICBsZXQgY29tYm9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbWJpbmVkLXRyaWJlcycpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21ib3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChjb21ib3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZmFkZWRcIikpIHtcbiAgICAgICAgY29tYm9zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGVkJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbWJvc1tpXS5jbGFzc0xpc3QuYWRkKCdmYWRlZCcpXG4gICAgICB9XG4gICAgfVxuICB9LFxuICByZW1vdmVBbGxGYWRlcygpIHtcbiAgICBsZXQgdHJpYmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlc3VsdHMtdG9waWMnKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0cmliZXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZmFkZWQnKVxuICAgIH1cbiAgfSxcbiAgbW92ZVRhcmdldEFuZERyYWcodGFyZ2V0SUQsIGRyYWdJRCkge1xuICAgIGxldCBjb21iaW5lZFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tYmluZWRUcmliZXMnKVxuICAgIGxldCBjb21iaW5lZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21iaW5lZFRyaWJlc0NvbnRhaW5lcicpXG4gICAgY29tYmluZWRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZhdGVkJylcbiAgICBsZXQgZHJhZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3BpYycgKyBkcmFnSUQpXG4gICAgbGV0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3BpYycgKyB0YXJnZXRJRClcbiAgICBkcmFnLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIEd1ZXN0UmVzdWx0cy5kcm9wKVxuICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBHdWVzdFJlc3VsdHMuZHJvcClcbiAgICBkcmFnLmNsYXNzTGlzdC5hZGQoXCJjb21iaW5lZC10cmliZXNcIilcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImNvbWJpbmVkLXRyaWJlc1wiKVxuICAgIGNvbWJpbmVkU2VjdGlvbi5hcHBlbmRDaGlsZChkcmFnKVxuICAgIGNvbWJpbmVkU2VjdGlvbi5hcHBlbmRDaGlsZCh0YXJnZXQpXG4gIH0sXG4gIG1vdmVDb21iaW5hdGlvbklmRXhpc3RzKCkge1xuICAgIGxldCBjb21ib3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29tYmluZWQtdHJpYmVzJylcbiAgICBsZXQgaW5kaXZpZHVhbENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cmliZVJlc3VsdHMnKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tYm9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb21ib3NbaV0uY2xhc3NMaXN0LnJlbW92ZSgnY29tYmluZWQtdHJpYmVzJylcbiAgICAgIGluZGl2aWR1YWxDb250YWluZXIuaW5zZXJ0QmVmb3JlKGNvbWJvc1tpXSwgaW5kaXZpZHVhbENvbnRhaW5lci5maXJzdENoaWxkKVxuICAgIH1cbiAgfSxcbiAgY3JlYXRlT3JFZGl0QWdyZWVtZW50VGV4dChyZXNwKXtcblxuICAgIGxldCBhZ3JlZW1lbnRDb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZ3JlZW1lbnRDb3VudCcpXG4gICAgaWYgKGFncmVlbWVudENvdW50KSB7XG4gICAgICBsZXQgYWdyZWVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FncmVlbWVudFRleHQnKVxuICAgICAgYWdyZWVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZhZGVkJylcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBhZ3JlZW1lbnRDb3VudC5pbm5lckhUTUwgPSBHdWVzdFJlc3VsdHMuZ2V0UGVvcGxlSHRtbChyZXNwLnBycS5saWtlX21pbmRlZClcbiAgICAgICAgYWdyZWVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGVkJylcbiAgICAgIH0sNTAwKVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBjb21iaW5lZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21iaW5lZFRyaWJlc0NvbnRhaW5lcicpXG4gICAgICBsZXQgYWdyZWVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIGxldCBsaWtlTWluZGVkID0gcmVzcC5wcnEubGlrZV9taW5kZWRcbiAgICAgIGFncmVlbWVudC5jbGFzc0xpc3QuYWRkKCdhZ3JlZW1lbnQnKVxuICAgICAgYWdyZWVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZhZGVkJylcbiAgICAgIGFncmVlbWVudC5pZCA9IFwiYWdyZWVtZW50VGV4dFwiXG4gICAgICBhZ3JlZW1lbnQuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwiYWdyZWVtZW50LWFycm93XCI+4oaRPC9zcGFuPjxzcGFuIGlkPVwiYWdyZWVtZW50Q291bnRcIiBjbGFzcz1cImFncmVlbWVudC1jb3VudFwiPiR7R3Vlc3RSZXN1bHRzLmdldFBlb3BsZUh0bWwobGlrZU1pbmRlZCl9IDwvc3Bhbj4gJHtsaWtlTWluZGVkID09IDEgPyBcImFncmVlc1wiIDogXCJhZ3JlZVwifSB3aXRoIHlvdSBhYm91dCB0aGVzZWBcbiAgICAgIGNvbWJpbmVkQ29udGFpbmVyLmFwcGVuZENoaWxkKGFncmVlbWVudClcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBhZ3JlZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZmFkZWQnKVxuICAgICAgfSw1MDApXG4gICAgfVxuICB9LFxuICBnZXRQZW9wbGVIdG1sKHBlb3BsZSkge1xuICAgIGlmIChwZW9wbGUgPiAxKSB7XG4gICAgICByZXR1cm4gYCR7cGVvcGxlfSA8c3BhbiBjbGFzcz1hZ3JlZW1lbnQtcGVvcGxlPnBlb3BsZTwvc3Bhbj5gXG4gICAgfSBlbHNlIGlmIChwZW9wbGUgPT0gMSkge1xuICAgICAgcmV0dXJuIGAke3Blb3BsZX0gPHNwYW4gY2xhc3M9YWdyZWVtZW50LXBlb3BsZT5wZXJzb248L3NwYW4+YFxuICAgIH0gZWxzZSBpZiAocGVvcGxlID09IG51bGwgfHwgcGVvcGxlID09IDApIHtcbiAgICAgIHJldHVybiBgMCA8c3BhbiBjbGFzcz1hZ3JlZW1lbnQtcGVvcGxlPnBlb3BsZTwvc3Bhbj5gXG4gICAgfVxuICB9LFxuICBjaGFuZ2VIZXJvUHJvbXB0KCkge1xuICAgIGxldCBoZXJvUHJvbXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdHNIZXJvUHJvbXB0JylcbiAgICBpZiAoaGVyb1Byb21wdCkge1xuICAgICAgaWYgKCFoZXJvUHJvbXB0LmNsYXNzTGlzdC5jb250YWlucygndHJpYmVzLWNvbWJpbmVkJykpIHtcbiAgICAgICAgaGVyb1Byb21wdC5jbGFzc0xpc3QuYWRkKCdmYWRlZCcpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGhlcm9Qcm9tcHQuY2xhc3NMaXN0LmFkZCgndHJpYmVzLWNvbWJpbmVkJylcbiAgICAgICAgICBoZXJvUHJvbXB0LmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGVkJylcbiAgICAgICAgfSwgMjAwMClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEd1ZXN0UmVzdWx0c1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbEtBO0FBb0tBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/guest_results.js\n");

/***/ }),

/***/ "./js/guest_survey.js":
/*!****************************!*\
  !*** ./js/guest_survey.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _guest_results__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./guest_results */ \"./js/guest_results.js\");\n\nvar GuestSurvey = {\n  init: function init(channel) {\n    window.tribe_survey = {};\n    window.tribe_survey.items = document.querySelectorAll('.survey-item');\n    window.tribe_survey.totalItems = window.tribe_survey.items.length;\n    window.tribe_survey.slide = 0;\n    window.tribe_survey.moving = false;\n    window.tribe_survey.channel = channel;\n    window.tribe_survey.results = {};\n    GuestSurvey.setCookie('tribeRatings', \"\", 2);\n    GuestSurvey.setInitialClasses();\n    GuestSurvey.setEventListeners();\n  },\n  setInitialClasses: function setInitialClasses() {\n    window.tribe_survey.items[window.tribe_survey.totalItems - 1].classList.add('prev');\n    window.tribe_survey.items[0].classList.add('active');\n    window.tribe_survey.items[1].classList.add('next');\n  },\n  setEventListeners: function setEventListeners() {\n    var buttons = document.querySelectorAll(\".button-tribe_survey\");\n    buttons.forEach(function (button) {\n      button.addEventListener('click', function () {\n        if (!window.tribe_survey.moving) {\n          GuestSurvey.initTopicRating(button);\n        }\n\n        GuestSurvey.moveNext();\n      });\n    });\n  },\n  moveGuestSurveyTo: function moveGuestSurveyTo(slide) {\n    if (!window.tribe_survey.moving) {\n      GuestSurvey.disableInteraction();\n      var prev = document.querySelector('.prev');\n      var active = document.querySelector('.active');\n      var next = document.querySelector('.next');\n\n      if (prev) {\n        prev.classList.remove(['prev']);\n      }\n\n      next.classList.remove(['next']);\n      active.classList.remove(['active']);\n      active.classList.add(['prev']);\n      next.classList.add(['active']);\n    }\n  },\n  moveNext: function moveNext() {\n    if (!window.tribe_survey.moving) {\n      if (window.tribe_survey.slide === window.tribe_survey.totalItems - 1) {\n        window.tribe_survey.slide = 0;\n      } else {\n        window.tribe_survey.slide++;\n      }\n\n      GuestSurvey.moveGuestSurveyTo(window.tribe_survey.slide);\n    }\n  },\n  movePrev: function movePrev() {\n    if (!window.tribe_survey.moving) {\n      if (window.tribe_survey.slide === 0) {\n        window.tribe_survey.slide = window.tribe_survey.totalItems - 1;\n      } else {\n        window.tribe_survey.slide--;\n      }\n\n      GuestSurvey.moveGuestSurveyTo(window.tribe_survey.slide);\n    }\n  },\n  disableInteraction: function disableInteraction() {\n    window.tribe_survey.moving = true;\n    setTimeout(function () {\n      window.tribe_survey.moving = false;\n    }, 500);\n  },\n  initTopicRating: function initTopicRating(button) {\n    var data = button.dataset;\n    var type = data.type;\n    var childId = parseInt(data.id);\n    var rating = parseInt(data.value);\n    var channel = window.tribe_survey.channel;\n    var content = document.getElementById(\"topicContent-\".concat(childId)).innerHTML;\n    var payload = {\n      id: childId,\n      rating: rating,\n      content: content,\n      type: type\n    };\n    channel.push(\"new_rating\", payload).receive(\"ok\", function (resp) {\n      GuestSurvey.handle_rating_response(resp, channel, childId);\n      GuestSurvey.storeRatingInCookie(childId, rating);\n    });\n  },\n  storeRatingInCookie: function storeRatingInCookie(childId, rating) {\n    var tribeRatings = GuestSurvey.getCookie('tribeRatings');\n\n    if (tribeRatings) {\n      GuestSurvey.setCookie('tribeRatings', tribeRatings + \"{\".concat(childId, \",\").concat(rating, \"}-\"), 2);\n    } else {\n      GuestSurvey.setCookie('tribeRatings', \"{\".concat(childId, \",\").concat(rating, \"}-\"), 2);\n    }\n  },\n  handle_rating_response: function handle_rating_response(resp, channel, childId) {\n    var result = resp[\"result\"];\n    var nextHTML = resp[\"next_html\"];\n\n    if (result) {\n      if (result == \"done\") {\n        _guest_results__WEBPACK_IMPORTED_MODULE_0__[\"default\"].init(resp, channel);\n      }\n    } else if (nextHTML) {\n      var prev = document.querySelector('.prev');\n      var surveyItems = document.getElementById('surveyItems');\n      var fragment = document.createRange().createContextualFragment(nextHTML);\n      surveyItems.appendChild(fragment);\n      GuestSurvey.setEventListeners();\n    }\n  },\n  setCookie: function setCookie(name, value, days) {\n    var expires = \"\";\n\n    if (days) {\n      var date = new Date();\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n      expires = \"; expires=\" + date.toUTCString();\n    }\n\n    document.cookie = name + \"=\" + (value || \"\") + expires + \"; path=/\";\n  },\n  getCookie: function getCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(';');\n\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n\n      while (c.charAt(0) == ' ') {\n        c = c.substring(1, c.length);\n      }\n\n      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n    }\n\n    return null;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (GuestSurvey);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9ndWVzdF9zdXJ2ZXkuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9ndWVzdF9zdXJ2ZXkuanM/NGU1YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR3Vlc3RSZXN1bHRzIGZyb20gXCIuL2d1ZXN0X3Jlc3VsdHNcIlxubGV0IEd1ZXN0U3VydmV5ID0ge1xuXG4gIGluaXQoY2hhbm5lbCkge1xuICAgIHdpbmRvdy50cmliZV9zdXJ2ZXkgPSB7fVxuICAgIHdpbmRvdy50cmliZV9zdXJ2ZXkuaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3VydmV5LWl0ZW0nKVxuICAgIHdpbmRvdy50cmliZV9zdXJ2ZXkudG90YWxJdGVtcyA9IHdpbmRvdy50cmliZV9zdXJ2ZXkuaXRlbXMubGVuZ3RoXG4gICAgd2luZG93LnRyaWJlX3N1cnZleS5zbGlkZSA9IDBcbiAgICB3aW5kb3cudHJpYmVfc3VydmV5Lm1vdmluZyA9IGZhbHNlXG4gICAgd2luZG93LnRyaWJlX3N1cnZleS5jaGFubmVsID0gY2hhbm5lbFxuICAgIHdpbmRvdy50cmliZV9zdXJ2ZXkucmVzdWx0cyA9IHt9XG4gICAgR3Vlc3RTdXJ2ZXkuc2V0Q29va2llKCd0cmliZVJhdGluZ3MnLCBcIlwiLCAyKVxuICAgIEd1ZXN0U3VydmV5LnNldEluaXRpYWxDbGFzc2VzKCk7XG4gICAgR3Vlc3RTdXJ2ZXkuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfSxcblxuICBzZXRJbml0aWFsQ2xhc3NlcygpIHtcbiAgICB3aW5kb3cudHJpYmVfc3VydmV5Lml0ZW1zW3dpbmRvdy50cmliZV9zdXJ2ZXkudG90YWxJdGVtcyAtIDFdLmNsYXNzTGlzdC5hZGQoJ3ByZXYnKVxuICAgIHdpbmRvdy50cmliZV9zdXJ2ZXkuaXRlbXNbMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICB3aW5kb3cudHJpYmVfc3VydmV5Lml0ZW1zWzFdLmNsYXNzTGlzdC5hZGQoJ25leHQnKVxuICB9LFxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGxldCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idXR0b24tdHJpYmVfc3VydmV5XCIpXG4gICAgYnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKCF3aW5kb3cudHJpYmVfc3VydmV5Lm1vdmluZykge1xuICAgICAgICAgIEd1ZXN0U3VydmV5LmluaXRUb3BpY1JhdGluZyggYnV0dG9uKVxuICAgICAgICB9XG4gICAgICAgIEd1ZXN0U3VydmV5Lm1vdmVOZXh0KClcbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBtb3ZlR3Vlc3RTdXJ2ZXlUbyhzbGlkZSkge1xuICAgIGlmICghd2luZG93LnRyaWJlX3N1cnZleS5tb3ZpbmcpIHtcbiAgICAgIEd1ZXN0U3VydmV5LmRpc2FibGVJbnRlcmFjdGlvbigpXG5cbiAgICAgIGxldCBwcmV2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZXYnKVxuICAgICAgbGV0IGFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKVxuICAgICAgbGV0IG5leHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV4dCcpXG5cbiAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgIHByZXYuY2xhc3NMaXN0LnJlbW92ZShbJ3ByZXYnXSlcblxuICAgICAgfVxuICAgICAgbmV4dC5jbGFzc0xpc3QucmVtb3ZlKFsnbmV4dCddKVxuICAgICAgYWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoWydhY3RpdmUnXSlcbiAgICAgIGFjdGl2ZS5jbGFzc0xpc3QuYWRkKFsncHJldiddKVxuICAgICAgbmV4dC5jbGFzc0xpc3QuYWRkKFsnYWN0aXZlJ10pXG4gICAgfVxuICB9LFxuXG4gIG1vdmVOZXh0KCkge1xuICAgIGlmICghd2luZG93LnRyaWJlX3N1cnZleS5tb3ZpbmcpIHtcbiAgICAgIGlmICh3aW5kb3cudHJpYmVfc3VydmV5LnNsaWRlID09PSAod2luZG93LnRyaWJlX3N1cnZleS50b3RhbEl0ZW1zIC0gMSkpIHtcbiAgICAgICAgd2luZG93LnRyaWJlX3N1cnZleS5zbGlkZSA9IDBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy50cmliZV9zdXJ2ZXkuc2xpZGUrK1xuICAgICAgfVxuICAgICAgR3Vlc3RTdXJ2ZXkubW92ZUd1ZXN0U3VydmV5VG8od2luZG93LnRyaWJlX3N1cnZleS5zbGlkZSlcbiAgICB9XG4gIH0sXG5cbiAgbW92ZVByZXYoKSB7XG4gICAgaWYgKCF3aW5kb3cudHJpYmVfc3VydmV5Lm1vdmluZykge1xuICAgICAgaWYgKHdpbmRvdy50cmliZV9zdXJ2ZXkuc2xpZGUgPT09IDApIHtcbiAgICAgICAgd2luZG93LnRyaWJlX3N1cnZleS5zbGlkZSA9IHdpbmRvdy50cmliZV9zdXJ2ZXkudG90YWxJdGVtcyAtIDFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy50cmliZV9zdXJ2ZXkuc2xpZGUtLVxuICAgICAgfVxuICAgICAgR3Vlc3RTdXJ2ZXkubW92ZUd1ZXN0U3VydmV5VG8od2luZG93LnRyaWJlX3N1cnZleS5zbGlkZSlcbiAgICB9XG4gIH0sXG5cbiAgZGlzYWJsZUludGVyYWN0aW9uKCkge1xuICAgIHdpbmRvdy50cmliZV9zdXJ2ZXkubW92aW5nID0gdHJ1ZVxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICB3aW5kb3cudHJpYmVfc3VydmV5Lm1vdmluZyA9IGZhbHNlXG4gICAgfSwgNTAwKVxuICB9LFxuXG4gIGluaXRUb3BpY1JhdGluZyhidXR0b24pIHtcbiAgICBsZXQgZGF0YSA9IGJ1dHRvbi5kYXRhc2V0XG4gICAgbGV0IHR5cGUgPSBkYXRhLnR5cGVcbiAgICBsZXQgY2hpbGRJZCA9IHBhcnNlSW50KGRhdGEuaWQpXG4gICAgbGV0IHJhdGluZyA9IHBhcnNlSW50KGRhdGEudmFsdWUpXG4gICAgbGV0IGNoYW5uZWwgPSB3aW5kb3cudHJpYmVfc3VydmV5LmNoYW5uZWxcbiAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGB0b3BpY0NvbnRlbnQtJHtjaGlsZElkfWApLmlubmVySFRNTFxuICAgIGxldCBwYXlsb2FkID0ge1xuICAgICAgaWQ6IGNoaWxkSWQsXG4gICAgICByYXRpbmc6IHJhdGluZyxcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICB0eXBlOiB0eXBlXG4gICAgfVxuXG4gICAgY2hhbm5lbC5wdXNoKFwibmV3X3JhdGluZ1wiLCBwYXlsb2FkKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCAocmVzcCkgPT4ge1xuICAgICAgICBHdWVzdFN1cnZleS5oYW5kbGVfcmF0aW5nX3Jlc3BvbnNlKHJlc3AsIGNoYW5uZWwsIGNoaWxkSWQpXG4gICAgICAgIEd1ZXN0U3VydmV5LnN0b3JlUmF0aW5nSW5Db29raWUoY2hpbGRJZCwgcmF0aW5nKVxuICAgICAgfVxuICAgIClcbiAgfSxcblxuICBzdG9yZVJhdGluZ0luQ29va2llKGNoaWxkSWQsIHJhdGluZykge1xuICAgIGxldCB0cmliZVJhdGluZ3MgPSBHdWVzdFN1cnZleS5nZXRDb29raWUoJ3RyaWJlUmF0aW5ncycpXG4gICAgaWYgKHRyaWJlUmF0aW5ncykge1xuICAgICAgR3Vlc3RTdXJ2ZXkuc2V0Q29va2llKCd0cmliZVJhdGluZ3MnLCB0cmliZVJhdGluZ3MgKyBgeyR7Y2hpbGRJZH0sJHtyYXRpbmd9fS1gLCAyKVxuICAgIH0gZWxzZSB7XG4gICAgICBHdWVzdFN1cnZleS5zZXRDb29raWUoJ3RyaWJlUmF0aW5ncycsIGB7JHtjaGlsZElkfSwke3JhdGluZ319LWAsIDIpXG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZV9yYXRpbmdfcmVzcG9uc2UocmVzcCwgY2hhbm5lbCwgY2hpbGRJZCkge1xuICAgIGxldCByZXN1bHQgPSByZXNwW1wicmVzdWx0XCJdXG4gICAgbGV0IG5leHRIVE1MID0gcmVzcFtcIm5leHRfaHRtbFwiXVxuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIGlmIChyZXN1bHQgPT0gXCJkb25lXCIpIHtcbiAgICAgICAgR3Vlc3RSZXN1bHRzLmluaXQocmVzcCwgY2hhbm5lbClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5leHRIVE1MKSB7XG4gICAgICBsZXQgcHJldiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmV2JylcbiAgICAgIGxldCBzdXJ2ZXlJdGVtcyAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VydmV5SXRlbXMnKVxuICAgICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChuZXh0SFRNTClcbiAgICAgIHN1cnZleUl0ZW1zLmFwcGVuZENoaWxkKGZyYWdtZW50KVxuICAgICAgR3Vlc3RTdXJ2ZXkuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIH1cbiAgfSxcblxuICBzZXRDb29raWUobmFtZSwgdmFsdWUsIGRheXMpIHtcbiAgICB2YXIgZXhwaXJlcyA9IFwiXCI7XG4gICAgaWYgKGRheXMpIHtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIChkYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCkpO1xuICAgICAgZXhwaXJlcyA9IFwiOyBleHBpcmVzPVwiICsgZGF0ZS50b1VUQ1N0cmluZygpO1xuICAgIH1cbiAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgXCI9XCIgKyAodmFsdWUgfHwgXCJcIikgKyBleHBpcmVzICsgXCI7IHBhdGg9L1wiO1xuICB9LFxuXG4gIGdldENvb2tpZShuYW1lKSB7XG4gICAgdmFyIG5hbWVFUSA9IG5hbWUgKyBcIj1cIjtcbiAgICB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYyA9IGNhW2ldO1xuICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09ICcgJykgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKTtcbiAgICAgIGlmIChjLmluZGV4T2YobmFtZUVRKSA9PSAwKSByZXR1cm4gYy5zdWJzdHJpbmcobmFtZUVRLmxlbmd0aCwgYy5sZW5ndGgpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHdWVzdFN1cnZleVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQXBKQTtBQXVKQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/guest_survey.js\n");

/***/ }),

/***/ "./js/guest_tribe.js":
/*!***************************!*\
  !*** ./js/guest_tribe.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar GuestTribe = {\n  init: function init(channel) {\n    var messageBoardButton = document.getElementById('tribeBoardNav');\n\n    if (messageBoardButton) {\n      messageBoardButton.addEventListener('click', function () {\n        console.log(\"push message board request to server\");\n        channel.push('get_message_board', {}).receive(\"ok\", function (resp) {\n          console.log(resp);\n        });\n      });\n    }\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (GuestTribe);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9ndWVzdF90cmliZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2d1ZXN0X3RyaWJlLmpzPzc5NTQiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IEd1ZXN0VHJpYmUgPSB7XG4gIGluaXQoY2hhbm5lbCkge1xuICAgIGxldCBtZXNzYWdlQm9hcmRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJpYmVCb2FyZE5hdicpXG4gICAgaWYgKG1lc3NhZ2VCb2FyZEJ1dHRvbikge1xuICAgICAgbWVzc2FnZUJvYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcInB1c2ggbWVzc2FnZSBib2FyZCByZXF1ZXN0IHRvIHNlcnZlclwiKVxuICAgICAgICBjaGFubmVsLnB1c2goJ2dldF9tZXNzYWdlX2JvYXJkJywge30pXG4gICAgICAgICAgLnJlY2VpdmUoXCJva1wiLCAocmVzcCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XG4gICAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgR3Vlc3RUcmliZVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFnQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/guest_tribe.js\n");

/***/ })

/******/ });